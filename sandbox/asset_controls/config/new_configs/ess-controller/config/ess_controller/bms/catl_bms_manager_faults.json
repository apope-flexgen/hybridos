{
    "/alarms/##BMS_ID##": {
        "ClearFaults": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    },
                    {
                        "remap": [
                            {
                                "inValue": "BMS ClearFaults - Preconditions were not met or failed to verify command was sent. View ESS Events page for more details",
                                "note": "Bit 0 - BMS ClearFaults - Preconditions were not met or failed to verify command was sent. View ESS Events page for more details",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_control_alarms[0]"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "note": "Alarm variable that is triggered if sending clear faults command is unsuccessful",
            "type": "alarm",
            "value": "Normal"
        },
        "CloseContactors": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    },
                    {
                        "remap": [
                            {
                                "inValue": "BMS CloseContactors - Preconditions were not met or failed to verify command was sent. View ESS Events page for more details",
                                "note": "Bit 1 - BMS CloseContactors - Preconditions were not met or failed to verify command was sent. View ESS Events page for more details",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_control_alarms[1]"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "note": "Alarm variable that is triggered if sending close contactors command is unsuccessful",
            "type": "alarm",
            "value": "Normal"
        },
        "HeartbeatRead": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "type": "alarm",
            "value": "Normal"
        },
        "MonitorVarAlarm": {
            "actions": {
                "onSet": [
                    {
                        "remap": [
                            {
                                "inValue": "CellTempDelta_limit_max",
                                "note": "Bit 0 - BMS CellTempDelta - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[0]"
                            },
                            {
                                "inValue": "CellVoltageDelta_limit_max",
                                "note": "Bit 1 - BMS CellVoltageDelta - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[1]"
                            },
                            {
                                "inValue": "DCCurrent_limit_max",
                                "note": "Bit 2 - BMS DCCurrent - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[2]"
                            },
                            {
                                "inValue": "DCCurrent_limit_min",
                                "note": "Bit 3 - BMS DCCurrent - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[3]"
                            },
                            {
                                "inValue": "DCVoltage_limit_max",
                                "note": "Bit 4 - BMS DCVoltage - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[4]"
                            },
                            {
                                "inValue": "DCVoltage_limit_min",
                                "note": "Bit 5 - BMS DCVoltage - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[5]"
                            },
                            {
                                "inValue": "HeartbeatRead_state",
                                "outValue": "BMS Communication Failure",
                                "uri": "/alarms/##BMS_ID##:HeartbeatRead"
                            },
                            {
                                "inValue": "MaxCellTemp_limit_max",
                                "note": "Bit 6 - BMS MaxCellTemp - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[6]"
                            },
                            {
                                "inValue": "MaxCellVoltage_limit_max",
                                "note": "Bit 7 - BMS MaxCellVoltage - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[7]"
                            },
                            {
                                "inValue": "MinCellTemp_limit_min",
                                "note": "Bit 8 - BMS MinCellTemp - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[8]"
                            },
                            {
                                "inValue": "MinCellVoltage_limit_min",
                                "note": "Bit 9 - BMS MinCellVoltage - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[9]"
                            },
                            {
                                "inValue": "NumRacksOnline_limit_min",
                                "note": "Bit 10 - BMS NumRacksOnline - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[10]"
                            },
                            {
                                "inValue": "SOC_limit_max",
                                "note": "Bit 11 - BMS SOC - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[11]"
                            },
                            {
                                "inValue": "SOC_limit_min",
                                "note": "Bit 12 - BMS SOC - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[12]"
                            },
                            {
                                "inValue": "SOH_limit_min",
                                "note": "Bit 13 - BMS SOH - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms[13]"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "ifChanged": false,
            "note1": "Contains last recently reported alarm from any monitoring variable",
            "note2": "Useful for reporting alarm states to an external management system (e.g. Site Controller) or modifying the alarm message before it is reported on the UI",
            "value": "Normal"
        },
        "OpenContactors": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    },
                    {
                        "remap": [
                            {
                                "inValue": "BMS OpenContactors - Preconditions were not met or failed to verify command was sent. View ESS Events page for more details",
                                "note": "Bit 2 - BMS OpenContactors - Preconditions were not met or failed to verify command was sent. View ESS Events page for more details",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_control_alarms[2]"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "note": "Alarm variable that is triggered if sending open contactors command is unsuccessful",
            "type": "alarm",
            "value": "Normal"
        },
        "VerifyCloseContactors": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    },
                    {
                        "remap": [
                            {
                                "inValue": "BMS VerifyCloseContactors - Command was sent, but the expected result was not observed before timeout",
                                "note": "Bit 3 - BMS VerifyCloseContactors - Command was sent, but the expected result was not observed before timeout",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_control_alarms[3]"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "note": "Alarm variable that is triggered if the BMS failed to close contactors",
            "type": "alarm",
            "value": "Normal"
        },
        "VerifyOpenContactors": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    },
                    {
                        "remap": [
                            {
                                "inValue": "BMS VerifyOpenContactors - Command was sent, but the expected result was not observed before timeout",
                                "note": "Bit 4 - BMS VerifyOpenContactors - Command was sent, but the expected result was not observed before timeout",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_control_alarms[4]"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "note": "Alarm variable that is triggered if the BMS failed to open contactors",
            "type": "alarm",
            "value": "Normal"
        },
        "clear_alarms": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "note1": "When this variable is set to Clear, all alarm variables (defined in /alarms/##BMS_ID##) will be reset to the normal state (defined in /config/##BMS_ID##:NoAlarmMsg)",
            "note2": "Also, all monitoring variables (defined in variable) will have their alarm/fault states reset",
            "numVars": 12,
            "type": "alarm",
            "value": "Normal",
            "variable1": "CellTempDelta",
            "variable10": "NumRacksOnline",
            "variable11": "SOC",
            "variable12": "SOH",
            "variable2": "CellVoltageDelta",
            "variable3": "DCCurrent",
            "variable4": "DCVoltage",
            "variable5": "HeartbeatRead",
            "variable6": "MaxCellTemp",
            "variable7": "MaxCellVoltage",
            "variable8": "MinCellTemp",
            "variable9": "MinCellVoltage"
        }
    },
    "/faults/##BMS_ID##": {
        "HeartbeatRead": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "type": "fault",
            "value": "Normal"
        },
        "MonitorVarFault": {
            "actions": {
                "onSet": [
                    {
                        "remap": [
                            {
                                "inValue": "CellTempDelta_limit_max",
                                "note": "Bit 0 - BMS CellTempDelta - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[0]"
                            },
                            {
                                "inValue": "CellVoltageDelta_limit_max",
                                "note": "Bit 1 - BMS CellVoltageDelta - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[1]"
                            },
                            {
                                "inValue": "DCCurrent_limit_max",
                                "note": "Bit 2 - BMS DCCurrent - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[2]"
                            },
                            {
                                "inValue": "DCCurrent_limit_min",
                                "note": "Bit 3 - BMS DCCurrent - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[3]"
                            },
                            {
                                "inValue": "DCVoltage_limit_max",
                                "note": "Bit 4 - BMS DCVoltage - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[4]"
                            },
                            {
                                "inValue": "DCVoltage_limit_min",
                                "note": "Bit 5 - BMS DCVoltage - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[5]"
                            },
                            {
                                "inValue": "HeartbeatRead_state",
                                "outValue": "BMS Communication Failure",
                                "uri": "/faults/##BMS_ID##:HeartbeatRead"
                            },
                            {
                                "inValue": "MaxCellTemp_limit_max",
                                "note": "Bit 6 - BMS MaxCellTemp - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[6]"
                            },
                            {
                                "inValue": "MaxCellVoltage_limit_max",
                                "note": "Bit 7 - BMS MaxCellVoltage - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[7]"
                            },
                            {
                                "inValue": "MinCellTemp_limit_min",
                                "note": "Bit 8 - BMS MinCellTemp - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[8]"
                            },
                            {
                                "inValue": "MinCellVoltage_limit_min",
                                "note": "Bit 9 - BMS MinCellVoltage - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[9]"
                            },
                            {
                                "inValue": "NumRacksOnline_limit_min",
                                "note": "Bit 10 - BMS NumRacksOnline - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[10]"
                            },
                            {
                                "inValue": "SOC_limit_max",
                                "note": "Bit 11 - BMS SOC - Max Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[11]"
                            },
                            {
                                "inValue": "SOC_limit_min",
                                "note": "Bit 12 - BMS SOC - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[12]"
                            },
                            {
                                "inValue": "SOH_limit_min",
                                "note": "Bit 13 - BMS SOH - Min Threshold Exceeded",
                                "outValue": true,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults[13]"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "ifChanged": false,
            "note1": "Contains last recently reported fault from any monitoring variable",
            "note2": "Useful for reporting fault states to an external management system (e.g. Site Controller) or modifying the fault message before it is reported on the UI",
            "value": "Normal"
        },
        "clear_faults": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "process_sys_alarm"
                            }
                        ]
                    }
                ]
            },
            "enabled": true,
            "note1": "When this variable is set to Clear, all fault variables (defined in /faults/##BMS_ID##) will be reset to the normal state (defined in /config/##BMS_ID##:NoFaultMsg)",
            "note2": "Also, all monitoring variables (defined in variable) will have their alarm/fault states reset",
            "numVars": 12,
            "type": "fault",
            "value": "Normal",
            "variable1": "CellTempDelta",
            "variable10": "NumRacksOnline",
            "variable11": "SOC",
            "variable12": "SOH",
            "variable2": "CellVoltageDelta",
            "variable3": "DCCurrent",
            "variable4": "DCVoltage",
            "variable5": "HeartbeatRead",
            "variable6": "MaxCellTemp",
            "variable7": "MaxCellVoltage",
            "variable8": "MinCellTemp",
            "variable9": "MinCellVoltage"
        }
    },
    "/schedule/wake_monitor/##BMS_ID##": {
        "/status/##BMS_ID##:AnyFireFaultActive": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:CellTempDelta": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:CellVoltageDelta": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:CurrentBeforeStopIsOK": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:DCCurrent": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:DCVoltage": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:HeartbeatRead": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:IsAlarming": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:IsFaulted": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:MaxCellTemp": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:MaxCellVoltage": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:MinCellTemp": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:MinCellVoltage": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:NumRacksOnline": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:OverCurrentAlarm": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:OverCurrentFault": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:SOC": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:SOH": {
            "amap": "##BMS_ID##",
            "func": "CheckMonitorVar"
        },
        "/status/##BMS_ID##:TotalAlarmCnt": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:TotalFaultCnt": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:UnderCurrentAlarm": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        },
        "/status/##BMS_ID##:UnderCurrentFault": {
            "amap": "##BMS_ID##",
            "func": "CalculateVar"
        }
    },
    "/status/##BMS_ID##": {
        "AlarmCnt": 0,
        "AnyFireFaultActive": {
            "enable": "/config/##BMS_ID##:enable",
            "numVars": 2,
            "operation": "or",
            "value": false,
            "variable1": "##BMS_ID##:AnyFireFaultActive",
            "variable2": "/status/##BMS_ID##:FireFaultActive"
        },
        "CellTempDelta": {
            "EnableFaultCheck": true,
            "EnableMaxValCheck": false,
            "MaxAlarmThreshold": 7,
            "MaxAlarmTimeout": 5.5,
            "MaxFaultThreshold": 10,
            "MaxFaultTimeout": 2.5,
            "MaxRecoverTimeout": 1.4,
            "MaxResetValue": 7,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for over cell temp delta conditions",
            "value": 0
        },
        "CellVoltageDelta": {
            "EnableFaultCheck": true,
            "EnableMaxValCheck": false,
            "MaxAlarmThreshold": 1,
            "MaxAlarmTimeout": 5.5,
            "MaxFaultThreshold": 2,
            "MaxFaultTimeout": 2.5,
            "MaxRecoverTimeout": 1.4,
            "MaxResetValue": 1,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for over cell voltage delta conditions",
            "value": 0
        },
        "ClearFaultsDone": {
            "actions": {
                "onSet": [
                    {
                        "remap": [
                            {
                                "outValue": 0,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_alarms"
                            },
                            {
                                "outValue": 0,
                                "uri": "/site/ess:bms_##BMS_ID##_monitor_faults"
                            },
                            {
                                "outValue": 0,
                                "uri": "/site/ess:bms_##BMS_ID##_control_alarms"
                            }
                        ]
                    }
                ]
            },
            "ifChanged": false,
            "note": "When this variable is set, the alarm/fault bitfields will be set to 0 to clear all bits",
            "value": false
        },
        "CurrentBeforeStopIsOK": {
            "enable": "/config/##BMS_ID##:enable",
            "expression": "{1} <= {2} and {1} >= (-1 * {2})",
            "note": "Set to true if the BMS DC current is within an acceptable level before stopping the PCS",
            "numVars": 2,
            "useExpr": true,
            "value": false,
            "variable1": "/status/##BMS_ID##:DCCurrent",
            "variable2": "/config/##BMS_ID##:CurrentBeforeStopThreshold"
        },
        "DCCurrent": {
            "EnableFaultCheck": true,
            "EnableMaxValCheck": false,
            "EnableMinValCheck": false,
            "MaxAlarmThreshold": 0,
            "MaxAlarmTimeout": 1,
            "MaxFaultThreshold": 0,
            "MaxFaultTimeout": 2.5,
            "MaxRecoverTimeout": 0,
            "MaxResetValue": 0,
            "MinAlarmThreshold": 0,
            "MinAlarmTimeout": 1,
            "MinFaultThreshold": 0,
            "MinFaultTimeout": 2.5,
            "MinRecoverTimeout": 0,
            "MinResetValue": 0,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for over/under current conditions",
            "value": 0
        },
        "DCVoltage": {
            "EnableFaultCheck": true,
            "EnableMaxValCheck": false,
            "EnableMinValCheck": false,
            "MaxAlarmThreshold": 1450,
            "MaxAlarmTimeout": 0.5,
            "MaxFaultThreshold": 1500,
            "MaxFaultTimeout": 0.5,
            "MaxRecoverTimeout": 1.5,
            "MaxResetValue": 1400,
            "MinAlarmThreshold": 1000,
            "MinAlarmTimeout": 0.5,
            "MinFaultThreshold": 800,
            "MinFaultTimeout": 0.2,
            "MinRecoverTimeout": 1.5,
            "MinResetValue": 1300,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for over/under voltage conditions",
            "value": 0
        },
        "FaultCnt": 0,
        "FaultShutdown": {
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "LogInfo"
                            }
                        ]
                    },
                    {
                        "remap": [
                            {
                                "inValue": true,
                                "outValue": true,
                                "uri": "/status/bms:FaultShutdown"
                            }
                        ]
                    }
                ]
            },
            "ifChanged": true,
            "note": "When the BMS instance faults, the fault shutdown event will be propagated to its parent",
            "value": false
        },
        "FireFaultActive": false,
        "HeartbeatRead": {
            "AlarmTimeout": 10,
            "EnableAlert": false,
            "EnableCommsCheck": false,
            "EnableStateCheck": false,
            "FaultTimeout": 15,
            "RecoverTimeout": 0.1,
            "Type": "int",
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault if ESS Controller loses communications with BMS",
            "value": 0
        },
        "IsAlarming": {
            "enable": "/config/##BMS_ID##:enable",
            "expression": "{1} > 0",
            "numVars": 1,
            "useExpr": true,
            "value": false,
            "variable1": "/status/##BMS_ID##:TotalAlarmCnt"
        },
        "IsFaulted": {
            "enable": "/config/##BMS_ID##:enable",
            "expression": "{1} or {2} > 0",
            "numVars": 2,
            "useExpr": true,
            "value": false,
            "variable1": "/status/##BMS_ID##:SystemFault",
            "variable2": "/status/##BMS_ID##:TotalFaultCnt"
        },
        "MaxCellTemp": {
            "EnableFaultCheck": true,
            "EnableMaxValCheck": false,
            "MaxAlarmThreshold": 45,
            "MaxAlarmTimeout": 2.5,
            "MaxFaultThreshold": 52,
            "MaxFaultTimeout": 1,
            "MaxRecoverTimeout": 1.4,
            "MaxResetValue": 45,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for over max cell temperature conditions",
            "value": 0
        },
        "MaxCellVoltage": {
            "EnableFaultCheck": true,
            "EnableMaxValCheck": false,
            "MaxAlarmThreshold": 3.58,
            "MaxAlarmTimeout": 2.5,
            "MaxFaultThreshold": 3.6,
            "MaxFaultTimeout": 0.2,
            "MaxRecoverTimeout": 1.4,
            "MaxResetValue": 3.5,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for over max cell voltage conditions",
            "value": 0
        },
        "MinCellTemp": {
            "EnableFaultCheck": true,
            "EnableMinValCheck": false,
            "MinAlarmThreshold": 10,
            "MinAlarmTimeout": 2.5,
            "MinFaultThreshold": 0.1,
            "MinFaultTimeout": 0.5,
            "MinRecoverTimeout": 1.4,
            "MinResetValue": 10,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for under min cell temperature conditions",
            "value": 0
        },
        "MinCellVoltage": {
            "EnableFaultCheck": true,
            "EnableMinValCheck": false,
            "MinAlarmThreshold": 2.85,
            "MinAlarmTimeout": 2.5,
            "MinFaultThreshold": 2.8,
            "MinFaultTimeout": 0,
            "MinRecoverTimeout": 1.4,
            "MinResetValue": 2.85,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for under min cell voltage conditions",
            "value": 0
        },
        "NumRacksOnline": {
            "EnableFaultCheck": true,
            "EnableMinValCheck": false,
            "MinAlarmThreshold": 5,
            "MinAlarmTimeout": 5,
            "MinFaultThreshold": 2,
            "MinFaultTimeout": 10,
            "MinRecoverTimeout": 1,
            "MinResetValue": 5,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note1": "Also a monitoring variable that reports an alarm/fault for under num instances condition",
            "note2": "TODO: Update min alarm/fault/reset thresholds and timeouts",
            "note3": "TODO: Decode or calculate num instances online and remap/link value to this variable",
            "value": 0
        },
        "OverCurrentAlarm": {
            "actions": {
                "onSet": [
                    {
                        "remap": [
                            {
                                "uri": "/status/##BMS_ID##:DCCurrent@MaxAlarmThreshold"
                            },
                            {
                                "uri": "/status/##BMS_ID##:DCCurrent@MaxResetValue"
                            }
                        ]
                    }
                ]
            },
            "enable": "/config/##BMS_ID##:enable",
            "expression": "{1}",
            "note": "Adjusts the max alarm and reset thresholds for BMS DC current monitoring variable depending on the discharge current limit",
            "numVars": 1,
            "useExpr": true,
            "value": 0,
            "variable1": "/limits/##BMS_ID##:DischargeCurrentLimit"
        },
        "OverCurrentFault": {
            "actions": {
                "onSet": [
                    {
                        "remap": [
                            {
                                "uri": "/status/##BMS_ID##:DCCurrent@MaxFaultThreshold"
                            }
                        ]
                    }
                ]
            },
            "enable": "/config/##BMS_ID##:enable",
            "expression": "{1} * 1.05",
            "note": "Adjusts the max fault threshold for BMS DC current monitoring variable depending on the discharge current limit",
            "numVars": 1,
            "useExpr": true,
            "value": 0,
            "variable1": "/limits/##BMS_ID##:DischargeCurrentLimit"
        },
        "SOC": {
            "EnableFaultCheck": true,
            "EnableMaxValCheck": false,
            "EnableMinValCheck": false,
            "MaxAlarmThreshold": 99.9,
            "MaxAlarmTimeout": 5.5,
            "MaxFaultThreshold": 100,
            "MaxFaultTimeout": 2.5,
            "MaxRecoverTimeout": 1.4,
            "MaxResetValue": 99,
            "MinAlarmThreshold": 6,
            "MinAlarmTimeout": 5.5,
            "MinFaultThreshold": 1,
            "MinFaultTimeout": 2.5,
            "MinRecoverTimeout": 1.4,
            "MinResetValue": 8,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for over/under soc conditions",
            "value": 0
        },
        "SOH": {
            "EnableFaultCheck": true,
            "EnableMinValCheck": false,
            "MinAlarmThreshold": 30,
            "MinAlarmTimeout": 5.5,
            "MinFaultThreshold": 25,
            "MinFaultTimeout": 2.5,
            "MinRecoverTimeout": 1.4,
            "MinResetValue": 30,
            "actions": {
                "onSet": [
                    {
                        "func": [
                            {
                                "amap": "##BMS_ID##",
                                "func": "CheckMonitorVar"
                            }
                        ]
                    }
                ]
            },
            "note": "Also a monitoring variable that reports an alarm/fault for under soh conditions",
            "value": 0
        },
        "SystemFault": false,
        "TotalAlarmCnt": {
            "enable": "/config/##BMS_ID##:enable",
            "numVars": 2,
            "operation": "+",
            "value": 0,
            "variable1": "##BMS_ID##:TotalAlarmCnt",
            "variable2": "/status/##BMS_ID##:AlarmCnt"
        },
        "TotalFaultCnt": {
            "enable": "/config/##BMS_ID##:enable",
            "numVars": 2,
            "operation": "+",
            "value": 0,
            "variable1": "##BMS_ID##:TotalFaultCnt",
            "variable2": "/status/##BMS_ID##:FaultCnt"
        },
        "UnderCurrentAlarm": {
            "actions": {
                "onSet": [
                    {
                        "remap": [
                            {
                                "uri": "/status/##BMS_ID##:DCCurrent@MinAlarmThreshold"
                            },
                            {
                                "uri": "/status/##BMS_ID##:DCCurrent@MinResetValue"
                            }
                        ]
                    }
                ]
            },
            "enable": "/config/##BMS_ID##:enable",
            "expression": "{1}",
            "note": "Adjusts the min alarm and reset thresholds for BMS DC current monitoring variable depending on the charge current limit",
            "numVars": 1,
            "useExpr": true,
            "value": 0,
            "variable1": "/limits/##BMS_ID##:ChargeCurrentLimit"
        },
        "UnderCurrentFault": {
            "actions": {
                "onSet": [
                    {
                        "remap": [
                            {
                                "uri": "/status/##BMS_ID##:DCCurrent@MinFaultThreshold"
                            }
                        ]
                    }
                ]
            },
            "enable": "/config/##BMS_ID##:enable",
            "expression": "{1} * 1.05",
            "note": "Adjusts the min fault threshold for BMS DC current monitoring variable depending on the charge current limit",
            "numVars": 1,
            "useExpr": true,
            "value": 0,
            "variable1": "/limits/##BMS_ID##:ChargeCurrentLimit"
        }
    }
}