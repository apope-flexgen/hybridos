{
    "/doc/07_bms_rack_modbus" :{
        "note01": " Here are the actions related to the BMS rack modbus inputs"
    },
    "/system/commands": {
        "runRackOpts": {
            "value": false,
            "enabled": false,
            "targav": "/system/commands:run",
            "options": [
                {"uri":"/sched/##RACK_ID##:checkInputs_##RACK_ID##",     "aname":"##RACK_ID##", "value":0, "every":1}
            ],
            "actions": {
                "onSet":[{"func":[{"amap": "##RACK_ID##", "func":"SchedItemOpts"}]}]
            }
        }
    },
    "/sched/##RACK_ID##": {
        "checkInputs_##RACK_ID##": {
            "value": 0,
            "note": "Sets ifChanged to false to allow ESS Controller to process inputs in case the value has not changed, but still needs to be processed",
            "enable": "/config/bms:enable",
            "actions": {
                "onSet":[{
                    "remap":[
                        {"uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_1@ifChanged",      "outValue": false},
                        {"uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_21@ifChanged",     "outValue": false},
                        {"uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_22@ifChanged",     "outValue": false},
                        {"uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_23@ifChanged",     "outValue": false},
                        {"uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_door_state@ifChanged",     "outValue": false}
                    ]
                }]
            }
        }
    },

    "/vlinks/##RACK_ID##": {
        "voltage":          	      { "vlink": "/status/##RACK_ID##:Voltage",        	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_voltage"},
        "current":          	      { "vlink": "/status/##RACK_ID##:Current",        	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_current"},
        "current_check_stop":         { "vlink": "/status/##RACK_ID##:CurrentCheckStop",      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_current"},
        "max_cell_voltage": 	      { "vlink": "/status/##RACK_ID##:MaxCellVoltage", 	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_max_cell_voltage"},
        "min_cell_voltage": 	      { "vlink": "/status/##RACK_ID##:MinCellVoltage", 	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_min_cell_voltage"},
        "avg_cell_voltage": 	      { "vlink": "/status/##RACK_ID##:AvgCellVoltage", 	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_avg_cell_voltage"},
        "max_cell_temp":    	      { "vlink": "/status/##RACK_ID##:MaxCellTemp",    	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_max_cell_temp"},
        "min_cell_temp":    	      { "vlink": "/status/##RACK_ID##:MinCellTemp",    	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_min_cell_temp"},
        "avg_cell_temp":    	      { "vlink": "/status/##RACK_ID##:AvgCellTemp",    	      "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_avg_cell_temp"},
        "soc":              	      { "vlink": "/status/##RACK_ID##:SOC",                   "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_soc"},
        "soh":              	      { "vlink": "/status/##RACK_ID##:SOH",                   "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_soh"},
        "dc_closed_p":                { "vlink": "/status/##RACK_ID##:DCClosedP",             "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_master_positive"},
        "dc_closed_n":                { "vlink": "/status/##RACK_ID##:DCClosedN",             "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_master_negative"},
        "charge_current_limit":       { "vlink": "/limits/##RACK_ID##:ChargeCurrentLimit",    "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_max_charge_current"},
        "discharge_current_limit":    { "vlink": "/limits/##RACK_ID##:DischargeCurrentLimit", "default": 0, "value": "/components/catl_##BMS_ID##_info:##RACK_ID##_max_discharge_current"}
    },
    "/components/catl_##BMS_ID##_info": {
        "##RACK_ID##_current": {
            "value": 0,
            "enable": "/config/bms:enable",
            "actions": {
                "onSet": [{
                    "remap": [
                        {"uri": "/status/##RACK_ID##:Current"},
                        {"uri": "/status/##RACK_ID##:CurrentCheckStop"}
                    ]
                }]
            }
        },
        "##RACK_ID##_warning_1": {
            "value": 0,
            "note":"SBMU Warning Table with Degrees Reg 0 Appendix 3",
            "ifChanged": false,
            "enable": "/config/bms:enable",
            "actions": {
                "onSet": [{
                    "enum": [
                        { "shift": 0,"mask": 3,"inValue": 0,"uri": "/alarms/##RACK_ID##:single_cell_over_volt", "outValue": "Normal"},
                        { "shift": 0,"mask": 3,"inValue": 1,"uri": "/alarms/##RACK_ID##:single_cell_over_volt", "outValue": "Warn 1"},
                        { "shift": 0,"mask": 3,"inValue": 2,"uri": "/alarms/##RACK_ID##:single_cell_over_volt", "outValue": "Warn 2"},
                        { "shift": 0,"mask": 3,"inValue": 3,"uri": "/alarms/##RACK_ID##:single_cell_over_volt", "outValue": "Warn 3"},

                        { "shift": 2,"mask": 3,"inValue": 0,"uri": "/alarms/##RACK_ID##:single_cell_under_volt", "outValue": "Normal"},
                        { "shift": 2,"mask": 3,"inValue": 1,"uri": "/alarms/##RACK_ID##:single_cell_under_volt", "outValue": "Warn 1"},
                        { "shift": 2,"mask": 3,"inValue": 2,"uri": "/alarms/##RACK_ID##:single_cell_under_volt", "outValue": "Warn 2"},
                        { "shift": 2,"mask": 3,"inValue": 3,"uri": "/alarms/##RACK_ID##:single_cell_under_volt", "outValue": "Warn 3"},

                        { "shift": 4,"mask": 3,"inValue": 0,"uri": "/alarms/##RACK_ID##:single_cell_over_temp", "outValue": "Normal"},
                        { "shift": 4,"mask": 3,"inValue": 1,"uri": "/alarms/##RACK_ID##:single_cell_over_temp", "outValue": "Warn 1"},
                        { "shift": 4,"mask": 3,"inValue": 2,"uri": "/alarms/##RACK_ID##:single_cell_over_temp", "outValue": "Warn 2"},
                        { "shift": 4,"mask": 3,"inValue": 3,"uri": "/alarms/##RACK_ID##:single_cell_over_temp", "outValue": "Warn 3"},

                        { "shift": 6,"mask": 3,"inValue": 0,"uri": "/alarms/##RACK_ID##:single_cell_under_temp", "outValue": "Normal"},
                        { "shift": 6,"mask": 3,"inValue": 1,"uri": "/alarms/##RACK_ID##:single_cell_under_temp", "outValue": "Warn 1"},
                        { "shift": 6,"mask": 3,"inValue": 2,"uri": "/alarms/##RACK_ID##:single_cell_under_temp", "outValue": "Reserve"},
                        { "shift": 6,"mask": 3,"inValue": 3,"uri": "/alarms/##RACK_ID##:single_cell_under_temp", "outValue": "Reserve"},

                        { "shift": 8,"mask": 3,"inValue": 0,"uri": "/alarms/##RACK_ID##:SOC_low", "outValue": "Normal"},
                        { "shift": 8,"mask": 3,"inValue": 1,"uri": "/alarms/##RACK_ID##:SOC_low", "outValue": "Warn 1"},
                        { "shift": 8,"mask": 3,"inValue": 2,"uri": "/alarms/##RACK_ID##:SOC_low", "outValue": "Warn 2"},
                        { "shift": 8,"mask": 3,"inValue": 3,"uri": "/alarms/##RACK_ID##:SOC_low", "outValue": "Reserve"},

                        { "shift": 12,"mask": 3,"inValue": 0,"uri": "/alarms/##RACK_ID##:charge_overcurrent", "outValue": "Normal"},
                        { "shift": 12,"mask": 3,"inValue": 1,"uri": "/alarms/##RACK_ID##:charge_overcurrent", "outValue": "Level 1"},
                        { "shift": 12,"mask": 3,"inValue": 2,"uri": "/alarms/##RACK_ID##:charge_overcurrent", "outValue": "Level 2"},
                        { "shift": 12,"mask": 3,"inValue": 3,"uri": "/alarms/##RACK_ID##:charge_overcurrent", "outValue": "Level 3"},

                        { "shift": 14,"mask": 3,"inValue": 0,"uri": "/alarms/##RACK_ID##:discharge_overcurrent", "outValue": "Normal"},
                        { "shift": 14,"mask": 3,"inValue": 1,"uri": "/alarms/##RACK_ID##:discharge_overcurrent", "outValue": "Level 1"},
                        { "shift": 14,"mask": 3,"inValue": 2,"uri": "/alarms/##RACK_ID##:discharge_overcurrent", "outValue": "Level 2"},
                        { "shift": 14,"mask": 3,"inValue": 3,"uri": "/alarms/##RACK_ID##:discharge_overcurrent", "outValue": "Level 3"},

                        { "shift": 0,"mask": 3,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_volt", "outValue": "Normal"},
                        { "shift": 0,"mask": 3,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_volt", "outValue": "Warn 1"},
                        { "shift": 0,"mask": 3,"inValue": 2,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_volt", "outValue": "Warn 2"},
                        { "shift": 0,"mask": 3,"inValue": 3,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_volt", "outValue": "Warn 3"},

                        { "shift": 2,"mask": 3,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_volt", "outValue": "Normal"},
                        { "shift": 2,"mask": 3,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_volt", "outValue": "Warn 1"},
                        { "shift": 2,"mask": 3,"inValue": 2,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_volt", "outValue": "Warn 2"},
                        { "shift": 2,"mask": 3,"inValue": 3,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_volt", "outValue": "Warn 3"},

                        { "shift": 4,"mask": 3,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_temp", "outValue": "Normal"},
                        { "shift": 4,"mask": 3,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_temp", "outValue": "Warn 1"},
                        { "shift": 4,"mask": 3,"inValue": 2,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_temp", "outValue": "Warn 2"},
                        { "shift": 4,"mask": 3,"inValue": 3,"uri": "/alarms/bms:##RACK_ID##_single_cell_over_temp", "outValue": "Warn 3"},

                        { "shift": 6,"mask": 3,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_temp", "outValue": "Normal"},
                        { "shift": 6,"mask": 3,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_temp", "outValue": "Warn 1"},
                        { "shift": 6,"mask": 3,"inValue": 2,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_temp", "outValue": "Reserve"},
                        { "shift": 6,"mask": 3,"inValue": 3,"uri": "/alarms/bms:##RACK_ID##_single_cell_under_temp", "outValue": "Reserve"},

                        { "shift": 8,"mask": 3,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_SOC_low", "outValue": "Normal"},
                        { "shift": 8,"mask": 3,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_SOC_low", "outValue": "Warn 1"},
                        { "shift": 8,"mask": 3,"inValue": 2,"uri": "/alarms/bms:##RACK_ID##_SOC_low", "outValue": "Warn 2"},
                        { "shift": 8,"mask": 3,"inValue": 3,"uri": "/alarms/bms:##RACK_ID##_SOC_low", "outValue": "Reserve"},

                        { "shift": 12,"mask": 3,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_charge_overcurrent", "outValue": "Normal"},
                        { "shift": 12,"mask": 3,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_charge_overcurrent", "outValue": "Level 1"},
                        { "shift": 12,"mask": 3,"inValue": 2,"uri": "/alarms/bms:##RACK_ID##_charge_overcurrent", "outValue": "Level 2"},
                        { "shift": 12,"mask": 3,"inValue": 3,"uri": "/alarms/bms:##RACK_ID##_charge_overcurrent", "outValue": "Level 3"},

                        { "shift": 14,"mask": 3,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_discharge_overcurrent", "outValue": "Normal"},
                        { "shift": 14,"mask": 3,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_discharge_overcurrent", "outValue": "Level 1"},
                        { "shift": 14,"mask": 3,"inValue": 2,"uri": "/alarms/bms:##RACK_ID##_discharge_overcurrent", "outValue": "Level 2"},
                        { "shift": 14,"mask": 3,"inValue": 3,"uri": "/alarms/bms:##RACK_ID##_discharge_overcurrent", "outValue": "Level 3"},

                        { "shift": 0,"mask": 3,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[0]", "outValue": true, "note": "Alarms, Bit 0 - Single Cell Overvoltage Warning 1"},
                        { "shift": 0,"mask": 3,"inValue": 2,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[1]", "outValue": true, "note": "Alarms, Bit 1 - Single Cell Overvoltage Warning 2"},
                        { "shift": 0,"mask": 3,"inValue": 3,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[2]", "outValue": true, "note": "Alarms, Bit 2 - Single Cell Overvoltage Warning 3"},

                        { "shift": 2,"mask": 3,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[3]", "outValue": true, "note": "Alarms, Bit 3 - Single Cell Undervoltage Warning 1"},
                        { "shift": 2,"mask": 3,"inValue": 2,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[4]", "outValue": true, "note": "Alarms, Bit 4 - Single Cell Undervoltage Warning 2"},
                        { "shift": 2,"mask": 3,"inValue": 3,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[5]", "outValue": true, "note": "Alarms, Bit 5 - Single Cell Undervoltage Warning 3"},

                        { "shift": 4,"mask": 3,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[6]", "outValue": true, "note": "Alarms, Bit 6 - Single Cell Overtemperature Warning 1"},
                        { "shift": 4,"mask": 3,"inValue": 2,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[7]", "outValue": true, "note": "Alarms, Bit 7 - Single Cell Overtemperature Warning 2"},
                        { "shift": 4,"mask": 3,"inValue": 3,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[8]", "outValue": true, "note": "Alarms, Bit 8 - Single Cell Overtemperature Warning 3"},

                        { "shift": 6,"mask": 3,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[9]", "outValue": true, "note": "Alarms, Bit 9 - Single Cell Undertemperature Warning 1"},

                        { "shift": 8,"mask": 3,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[10]", "outValue": true, "note": "Alarms, Bit 10 - SOC Low Warning 1"},
                        { "shift": 8,"mask": 3,"inValue": 2,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[11]", "outValue": true, "note": "Alarms, Bit 11 - SOC Low Warning 2"},

                        { "shift": 12,"mask": 3,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[12]", "outValue": true, "note": "Alarms, Bit 12 - Charge Overcurrent Warning Level 1"},
                        { "shift": 12,"mask": 3,"inValue": 2,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[13]", "outValue": true, "note": "Alarms, Bit 13 - Charge Overcurrent Warning Level 2"},
                        { "shift": 12,"mask": 3,"inValue": 3,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[14]", "outValue": true, "note": "Alarms, Bit 14 - Charge Overcurrent Warning Level 3"},

                        { "shift": 14,"mask": 3,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[15]", "outValue": true, "note": "Alarms, Bit 15 - Discharge Overcurrent Warning Level 1"},
                        { "shift": 14,"mask": 3,"inValue": 2,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[16]", "outValue": true, "note": "Alarms, Bit 16 - Discharge Overcurrent Warning Level 2"},
                        { "shift": 14,"mask": 3,"inValue": 3,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[17]", "outValue": true, "note": "Alarms, Bit 17 - Discharge Overcurrent Warning Level 3"}
                    ]
                },
                {
                    "remap": [
                        {"enable":"/config/bms:enum_opt","uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_1@ifChanged", "useAv":true, "outValue": true}
                    ]
                }]
            }
        },
        "##RACK_ID##_warning_21": {
            "value": 0,
            "note":"SBMU Warning Table with Degrees Reg 1 Appendix 4",
            "ifChanged": false,
            "enable": "/config/bms:enable",
            "actions": {
                "onSet": [{
                    "enum": [
                        { "shift": 2,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:cell_voltage_diff", "outValue": "Normal"},
                        { "shift": 2,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:cell_voltage_diff", "outValue": "Warn"},

                        { "shift": 3,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:temp_diff", "outValue": "Normal"},
                        { "shift": 3,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:temp_diff", "outValue": "Warn"},

                        { "shift": 4,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:cell_extreme_temp", "outValue": "Normal"},
                        { "shift": 4,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:cell_extreme_temp", "outValue": "Fault"},

                        { "shift": 5,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:cell_extreme_voltage", "outValue": "Normal"},
                        { "shift": 5,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:cell_extreme_voltage", "outValue": "Fault"},

                        { "shift": 7,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:main_positive_relay_close_fail", "outValue": "Normal"},
                        { "shift": 7,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:main_positive_relay_close_fail", "outValue": "Fault"},

                        { "shift": 8,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:main_negative_relay_close_fail", "outValue": "Normal"},
                        { "shift": 8,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:main_negative_relay_close_fail", "outValue": "Fault"},

                        { "shift": 9,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:main_positive_relay_stuck_fail", "outValue": "Normal"},
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:main_positive_relay_stuck_fail", "outValue": "Fault"},

                        { "shift": 10,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:main_negative_relay_stuck_fail", "outValue": "Normal"},
                        { "shift": 10,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:main_negative_relay_stuck_fail", "outValue": "Fault"},

                        { "shift": 12,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:balance_function", "outValue": "Normal"},
                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:balance_function", "outValue": "Warn"},

                        { "shift": 13,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:mcu_self_check", "outValue": "Normal"},
                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:mcu_self_check", "outValue": "Fault"},

                        { "shift": 15,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:CCAN_communications", "outValue": "Normal"},
                        { "shift": 15,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:CCAN_communications", "outValue": "Fault"},

                        { "shift": 2,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_cell_voltage_diff", "outValue": "Normal"},
                        { "shift": 2,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_cell_voltage_diff", "outValue": "Warn"},

                        { "shift": 3,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_temp_diff", "outValue": "Normal"},
                        { "shift": 3,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_temp_diff", "outValue": "Warn"},

                        { "shift": 4,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_cell_extreme_temp", "outValue": "Normal"},
                        { "shift": 4,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_cell_extreme_temp", "outValue": "Fault"},

                        { "shift": 5,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_cell_extreme_voltage", "outValue": "Normal"},
                        { "shift": 5,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_cell_extreme_voltage", "outValue": "Fault"},

                        { "shift": 7,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_main_positive_relay_close_fail", "outValue": "Normal"},
                        { "shift": 7,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_main_positive_relay_close_fail", "outValue": "Fault"},

                        { "shift": 8,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_main_negative_relay_close_fail", "outValue": "Normal"},
                        { "shift": 8,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_main_negative_relay_close_fail", "outValue": "Fault"},

                        { "shift": 9,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_main_positive_relay_stuck_fail", "outValue": "Normal"},
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_main_positive_relay_stuck_fail", "outValue": "Fault"},

                        { "shift": 10,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_main_negative_relay_stuck_fail", "outValue": "Normal"},
                        { "shift": 10,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_main_negative_relay_stuck_fail", "outValue": "Fault"},

                        { "shift": 12,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_balance_function", "outValue": "Normal"},
                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_balance_function", "outValue": "Warn"},

                        { "shift": 13,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_mcu_self_check", "outValue": "Normal"},
                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_mcu_self_check", "outValue": "Fault"},

                        { "shift": 15,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_CCAN_communications", "outValue": "Normal"},
                        { "shift": 15,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_CCAN_communications", "outValue": "Fault"},
                        
                        { "shift": 2,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[18]", "outValue": true, "note": "Alarms, Bit 18 - Cell Voltage Difference Warning"},
                        
                        { "shift": 3,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[19]", "outValue": true, "note": "Alarms, Bit 19 - Temperature Difference Warning"},
                        
                        { "shift": 4,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[0]", "outValue": true, "note": "Faults, Bit 0 - Cell Extreme Temperature Fault"},
                        
                        { "shift": 5,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[1]", "outValue": true, "note": "Faults, Bit 1 - Cell Extreme Voltage Fault"},
                                              
                        { "shift": 7,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[2]", "outValue": true, "note": "Faults, Bit 2 - Master Positive Relay Close Fail Fault"},
                        
                        { "shift": 8,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[3]", "outValue": true, "note": "Faults, Bit 3 - Master Negative Relay Close Fail Fault"},
                        
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[4]", "outValue": true, "note": "Faults, Bit 4 - Master Positive Relay Stuck Fault"},
                        
                        { "shift": 10,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[5]", "outValue": true, "note": "Faults, Bit 5 - Master Negative Relay Stuck Fault"},
                        
                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[20]", "outValue": true, "note": "Alarms, Bit 20 - Balance Warning"},

                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[6]", "outValue": true, "note": "Faults, Bit 6 - MCU Self-Check Fault"},
                        
                        { "shift": 15,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[7]", "outValue": true, "note": "Faults, Bit 7 - Inner Communication Fault (CCAN)"}
                    ]
                },
                {
                    "remap": [
                        {"enable":"/config/bms:enum_opt","uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_21@ifChanged", "useAv":true, "outValue": true}
                    ]
                }]
            }
        },
        "##RACK_ID##_warning_22": {
            "value": 0,
            "note":"SBMU Warning Table with Degrees Reg 2 Appendix 4",
            "ifChanged": false,
            "enable": "/config/bms:enable",
            "actions": {
                "onSet": [{
                    "enum": [
                        { "shift": 0,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:SCAN_communications", "outValue": "Normal"},
                        { "shift": 0,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:SCAN_communications", "outValue": "Fault"},
                        
                        { "shift": 2,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:current_sensor_abnormal", "outValue": "Normal"},
                        { "shift": 2,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:current_sensor_abnormal", "outValue": "Fault"},

                        { "shift": 3,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:single_cell_voltage_sampling", "outValue": "Normal"},
                        { "shift": 3,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:single_cell_voltage_sampling", "outValue": "Fault"},

                        { "shift": 4,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:module_temp_sampling", "outValue": "Normal"},
                        { "shift": 4,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:module_temp_sampling", "outValue": "Fault"},

                        { "shift": 5,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:high_voltage_open_circuit", "outValue": "Normal"},
                        { "shift": 5,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:high_voltage_open_circuit", "outValue": "Fault"},

                        { "shift": 6,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:MSD_fault", "outValue": "Normal"},
                        { "shift": 6,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:MSD_fault", "outValue": "Fault"},

                        { "shift": 7,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:rack_isolate", "outValue": "Normal"},
                        { "shift": 7,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:rack_isolate", "outValue": "Fault"},

                        { "shift": 8,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:rack_fuse", "outValue": "Normal"},
                        { "shift": 8,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:rack_fuse", "outValue": "Fault"},

                        { "shift": 9,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:pre_charge_fail_three_times", "outValue": "Normal"},
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:pre_charge_fail_three_times", "outValue": "Fault"},

                        { "shift": 11,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:contactor_coil_abnormal", "outValue": "Normal"},
                        { "shift": 11,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:contactor_coil_abnormal", "outValue": "Fault"},

                        { "shift": 12,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:sampling_voltage_and_sum_voltage_diff", "outValue": "Normal"},
                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:sampling_voltage_and_sum_voltage_diff", "outValue": "Warn"},

                        { "shift": 13,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:MCAN_communications", "outValue": "Normal"},
                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:MCAN_communications", "outValue": "Warn"},

                        { "shift": 0,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_SCAN_communications", "outValue": "Normal"},
                        { "shift": 0,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_SCAN_communications", "outValue": "Fault"},

                        { "shift": 2,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_current_sensor_abnormal", "outValue": "Normal"},
                        { "shift": 2,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_current_sensor_abnormal", "outValue": "Fault"},

                        { "shift": 3,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_single_cell_voltage_sampling", "outValue": "Normal"},
                        { "shift": 3,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_single_cell_voltage_sampling", "outValue": "Fault"},

                        { "shift": 4,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_module_temp_sampling", "outValue": "Normal"},
                        { "shift": 4,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_module_temp_sampling", "outValue": "Fault"},

                        { "shift": 5,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_high_voltage_open_circuit", "outValue": "Normal"},
                        { "shift": 5,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_high_voltage_open_circuit", "outValue": "Fault"},

                        { "shift": 6,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_MSD_fault", "outValue": "Normal"},
                        { "shift": 6,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_MSD_fault", "outValue": "Fault"},

                        { "shift": 7,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_rack_isolate", "outValue": "Normal"},
                        { "shift": 7,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_rack_isolate", "outValue": "Fault"},

                        { "shift": 8,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_rack_fuse", "outValue": "Normal"},
                        { "shift": 8,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_rack_fuse", "outValue": "Fault"},

                        { "shift": 9,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_pre_charge_fail_three_times", "outValue": "Normal"},
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_pre_charge_fail_three_times", "outValue": "Fault"},

                        { "shift": 11,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_contactor_coil_abnormal", "outValue": "Normal"},
                        { "shift": 11,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_contactor_coil_abnormal", "outValue": "Fault"},

                        { "shift": 12,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_sampling_voltage_and_sum_voltage_diff", "outValue": "Normal"},
                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_sampling_voltage_and_sum_voltage_diff", "outValue": "Warn"},

                        { "shift": 13,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_MCAN_communications", "outValue": "Normal"},
                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_MCAN_communications", "outValue": "Warn"},

                        { "shift": 0,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[8]", "outValue": true, "note": "Faults, Bit 8 - Inner Communication Fault (SCAN)"},
                        
                        { "shift": 2,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[9]", "outValue": true, "note": "Faults, Bit 9 - Current Sensor Abnormal Fault"},
                        
                        { "shift": 3,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[10]", "outValue": true, "note": "Faults, Bit 10 - Single Cell Voltage Sampling Abnormal Fault"},
                        
                        { "shift": 4,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[11]", "outValue": true, "note": "Faults, Bit 11 - Module Temperature Sampling Abnormal Fault"},
                        
                        { "shift": 5,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[12]", "outValue": true, "note": "Faults, Bit 12 - High Voltage Circuit Open Fault"},
                        
                        { "shift": 6,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[13]", "outValue": true, "note": "Faults, Bit 13 - MSD Fault"},
                        
                        { "shift": 7,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[14]", "outValue": true, "note": "Faults, Bit 14 - Isolate Switch Fault"},
                        
                        { "shift": 8,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[15]", "outValue": true, "note": "Faults, Bit 15 - Rack Fuse Fault"},

                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[16]", "outValue": true, "note": "Faults, Bit 16 - Pre-Charge Failed Three Times Fault"},

                        { "shift": 11,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[17]", "outValue": true, "note": "Faults, Bit 17 - Contactor Coil Abnormal Fault"},

                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[21]", "outValue": true, "note": "Alarms, Bit 21 - Different Voltage Between Sampling Voltage and Sum Voltage Warning"},

                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[22]", "outValue": true, "note": "Alarms, Bit 22 - MCAN Communcation Warning"}
                    ]
                },
                {
                    "remap": [
                        {"enable":"/config/bms:enum_opt","uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_22@ifChanged", "useAv":true, "outValue": true}
                    ]
                }]
            }
        },
        "##RACK_ID##_warning_23": {
            "value": 0,
            "note":"SBMU Warning Table with Degrees Reg 3 Appendix 4",
            "ifChanged": false,
            "enable": "/config/bms:enable",
            "actions": {
                "onSet": [{
                    "enum": [
                        { "shift": 9,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:door_state", "outValue": "Normal"},
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:door_state", "outValue": "Open"},

                        { "shift": 10,"mask": 1,"inValue": 0,"uri": "/faults/##RACK_ID##:control_box_over_temp", "outValue": "Normal"},
                        { "shift": 10,"mask": 1,"inValue": 1,"uri": "/faults/##RACK_ID##:control_box_over_temp", "outValue": "Fault"},

                        { "shift": 11,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:fan_fault_1", "outValue": "Normal"},
                        { "shift": 11,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:fan_fault_1", "outValue": "Warn"},

                        { "shift": 12,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:fan_fault_2", "outValue": "Normal"},
                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:fan_fault_2", "outValue": "Warn"},

                        { "shift": 13,"mask": 1,"inValue": 0,"uri": "/alarms/##RACK_ID##:contactor_cut_over_load", "outValue": "Normal"},
                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/alarms/##RACK_ID##:contactor_cut_over_load", "outValue": "Warn"},

                        { "shift": 9,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_door_state", "outValue": "Normal"},
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_door_state", "outValue": "Open"},

                        { "shift": 10,"mask": 1,"inValue": 0,"uri": "/faults/bms:##RACK_ID##_control_box_over_temp", "outValue": "Normal"},
                        { "shift": 10,"mask": 1,"inValue": 1,"uri": "/faults/bms:##RACK_ID##_control_box_over_temp", "outValue": "Fault"},

                        { "shift": 11,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_fan_fault_1", "outValue": "Normal"},
                        { "shift": 11,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_fan_fault_1", "outValue": "Warn"},

                        { "shift": 12,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_fan_fault_2", "outValue": "Normal"},
                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_fan_fault_2", "outValue": "Warn"},

                        { "shift": 13,"mask": 1,"inValue": 0,"uri": "/alarms/bms:##RACK_ID##_contactor_cut_over_load", "outValue": "Normal"},
                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/alarms/bms:##RACK_ID##_contactor_cut_over_load", "outValue": "Warn"},
                        
                        { "shift": 9,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[23]", "outValue": true, "note": "Alarms, Bit 23 - Door State Warning"},

                        { "shift": 10,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_faults[18]", "outValue": true, "note": "Faults, Bit 18 - Over Temperature in Control Box Fault"},

                        { "shift": 11,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[24]", "outValue": true, "note": "Alarms, Bit 24 - Fan Fault #1"},

                        { "shift": 12,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[25]", "outValue": true, "note": "Alarms, Bit 25 - Fan Fault #2"},

                        { "shift": 13,"mask": 1,"inValue": 1,"uri": "/master/##ESS_ID##_ls:##RACK_ID##_alarms[26]", "outValue": true, "note": "Alarms, Bit 26 - Contactor Cut Over Load Warning"}
                    ]
                },
                {
                    "remap": [
                        {"enable":"/config/bms:enum_opt","uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_warning_23@ifChanged", "useAv":true, "outValue": true}
                    ]
                }]
            }
        },
        "##RACK_ID##_door_state": {
            "value":0,
            "ifChanged": false,
            "enable": "/config/bms:enable",
            "actions": { 
                "onSet":[{
                    "remap":[
                        {"inValue": 0, "uri":"/assets/##BMS_ID##/##RACK_ID##:sbmu_door_state_ui", "outValue": "Closed"},
                        {"inValue": 1, "uri":"/assets/##BMS_ID##/##RACK_ID##:sbmu_door_state_ui", "outValue": "Open"},

                        {"enable":"/config/bms:enum_opt","uri": "/components/catl_##BMS_ID##_info:##RACK_ID##_door_state@ifChanged", "useAv":true, "outValue": true}
                    ]
                }]
            }
        }
    }
}