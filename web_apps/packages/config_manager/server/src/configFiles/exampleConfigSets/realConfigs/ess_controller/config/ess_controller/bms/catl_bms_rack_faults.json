{
    "/faults/bms": {
        "##RACK_ID##_cell_extreme_temp":              {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_cell_extreme_voltage":           {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_main_positive_relay_close_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_main_negative_relay_close_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_main_positive_relay_stuck_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_main_negative_relay_stuck_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_mcu_self_check":                 {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_CCAN_communications":            {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_SCAN_communications":            {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_current_sensor_abnormal":        {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_single_cell_voltage_sampling":   {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_module_temp_sampling":           {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_high_voltage_open_circuit":      {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_MSD_fault":                      {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_rack_isolate":                   {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_rack_fuse":                      {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_pre_charge_fail_three_times":    {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_contactor_coil_abnormal":        {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_door_state":                     {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_control_box_over_temp":          {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}}
    },
    "/alarms/bms": {
        "##RACK_ID##_single_cell_over_volt":  {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_single_cell_under_volt": {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_single_cell_over_temp":  {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_single_cell_under_temp": {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_SOC_low":                {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_charge_overcurrent":     {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_discharge_overcurrent":  {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_chiller_alarm":          {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_cell_voltage_diff":      {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_temp_diff":              {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_balance_function":       {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_sampling_voltage_and_sum_voltage_diff":{"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_MCAN_communications":    {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_fan_fault_1":            {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_fan_fault_2":            {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}},
        "##RACK_ID##_contactor_cut_over_load":{"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "bms"}]}]}}
    },
    "/faults/##RACK_ID##": {
        "clear_faults": {
            "value": 0,
            "type": "fault",
            "actions": {
                "onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]
            }
        },
        "cell_extreme_temp":              {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "cell_extreme_voltage":           {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "main_positive_relay_close_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "main_negative_relay_close_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "main_positive_relay_stuck_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "main_negative_relay_stuck_fail": {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "mcu_self_check":                 {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "CCAN_communications":            {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "SCAN_communications":            {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "current_sensor_abnormal":        {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "single_cell_voltage_sampling":   {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "module_temp_sampling":           {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "high_voltage_open_circuit":      {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "MSD_fault":                      {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "rack_isolate":                   {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "rack_fuse":                      {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "pre_charge_fail_three_times":    {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "contactor_coil_abnormal":        {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "door_state":                     {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "control_box_over_temp":          {"value": "Normal","type": "fault","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}}
    },
    "/alarms/##RACK_ID##": {
        "clear_alarms": {
            "value": 0,
            "type": "alarm",
            "actions": {
                "onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]
            }
        },
        "single_cell_over_volt":  {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "single_cell_under_volt": {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "single_cell_over_temp":  {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "single_cell_under_temp": {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "SOC_low":                {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "charge_overcurrent":     {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "discharge_overcurrent":  {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "chiller_alarm":          {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "cell_voltage_diff":      {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "temp_diff":              {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "balance_function":       {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "sampling_voltage_and_sum_voltage_diff":{"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "MCAN_communications":    {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "fan_fault_1":            {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "fan_fault_2":            {"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}},
        "contactor_cut_over_load":{"value": "Normal","type": "alarm","actions": {"onSet": [{"func": [{"func": "process_sys_alarm", "amap": "##RACK_ID##"}]}]}}
    },

    "/schedule/wake_monitor/##RACK_ID##":{
        "/status/##RACK_ID##:Current": { "enable": true, "amap": "##RACK_ID##", "func":"CheckMonitorVar"},

        "/status/##RACK_ID##:OverCurrentAlarm":   { "enable": true, "amap": "##RACK_ID##", "func":"CalculateVar"},
        "/status/##RACK_ID##:UnderCurrentAlarm":  { "enable": true, "amap": "##RACK_ID##", "func":"CalculateVar"},
        "/status/##RACK_ID##:OverCurrentFault":   { "enable": true, "amap": "##RACK_ID##", "func":"CalculateVar"},
        "/status/##RACK_ID##:UnderCurrentFault":  { "enable": true, "amap": "##RACK_ID##", "func":"CalculateVar"}

    },
    "/status/##RACK_ID##": {
        "Current": {
            "value": 0,
            "EnableMaxValCheck": false,
            "EnableMinValCheck": false,
            "AlarmTimeout": 0.4,
            "MinAlarmTimeout": 1.75,
            "MaxAlarmTimeout": 1.75,
            "MinRecoverTimeout": 0,
            "MaxRecoverTimeout": 0,
            "actions": {
                "onSet": [{"func": [{"func": "CheckMonitorVar","amap": "##RACK_ID##"}]}]
            }
        },
        "UnderCurrentAlarm": {
            "value": 0,
            "useExpr": true,
            "numVars": 1, 
            "variable1": "/limits/##RACK_ID##:ChargeCurrentLimit",
            "expression": "{1}",
            "actions": {
                "onSet":[{
                    "remap":[
                        {"uri": "/status/##RACK_ID##:Current@MinAlarmThreshold"}
                    ]
                }]
            }
        },
        "OverCurrentAlarm": {
            "value": 0,
            "useExpr": true,
            "numVars": 1, 
            "variable1": "/limits/##RACK_ID##:DischargeCurrentLimit",
            "expression": "{1}",
            "actions": {
                "onSet":[{
                    "remap":[
                        {"uri": "/status/##RACK_ID##:Current@MaxAlarmThreshold"}
                    ]
                }]
            }
        },
        "UnderCurrentFault": {
            "value": 0,
            "useExpr": true,
            "numVars": 1, 
            "variable1": "/limits/##RACK_ID##:ChargeCurrentLimit",
            "expression": "{1} * 1.05",
            "actions": {
                "onSet":[{
                    "remap":[
                        {"uri": "/status/##RACK_ID##:Current@MinFaultThreshold"}
                    ]
                }]
            }
        },
        "OverCurrentFault": {
            "value": 0,
            "useExpr": true,
            "numVars": 1, 
            "variable1": "/limits/##RACK_ID##:DischargeCurrentLimit",
            "expression": "{1} * 1.05",
            "actions": {
                "onSet":[{
                    "remap":[
                        {"uri": "/status/##RACK_ID##:Current@MaxFaultThreshold"}
                    ]
                }]
            }
        }
    }
}