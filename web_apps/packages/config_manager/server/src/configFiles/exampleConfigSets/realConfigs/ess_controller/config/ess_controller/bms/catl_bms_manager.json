{
    "/notes/bms": {
        "note1":"This is the bms manager config file.",
        "note1a":"The bms page of the ui display is outlined in /assets/bms/summay",
        "note1b":"The /assets/bms table defines the racks or battery management uints, each has a template file with placements for selected key words",
        "note2": "The /config/bms area is still under development",
        "note3":"The /components/catl_##BMS_ID##... tables define the incoming control words from the bms modbus interface",
        "note4":"The /links/<bms> table  defines mapping of external interface components to internal control variables",
        "note5":"There are some junk/test fields as well... they will removed soon"
    },
    "/config/bms": {
        "AlarmDestination": "/assets/bms/##BMS_ID##:alarms",
        "FaultDestination": "/assets/bms/##BMS_ID##:faults",
        "NoFaultMsg": "Normal",
        "NoAlarmMsg": "Normal",
        "maxKeyCmdOnTime": 3,
        "maxKeyCmdTime": 4,
        "maxKeyCmdTries": 5,
        "maxStartupTime": 30,
        "maxShutdownTime": 30,
        "enable": false,
        "enum_opt": false
    },
    "/assets/bms/##BMS_ID##": {
        "name": "CATL BMS Manager",
        "alarms":                       {"name": "Alarms",                 "value": 0,"options": [],"enabled": true},
        "faults":                       {"name": "Faults",                 "value": 0,"options": [],"enabled": true},
        "power_state":                  {"name": "Power State",            "value": "OFF","enabled": true},
        "system_state":                 {"name": "Batteries Status",       "value": "INIT","enabled": true},
        "com_status":                   {"name": "Communication Status",   "value": "INIT","enabled": true},
        "soc":                          {"name": "State of Charge",        "value": 0,"enabled": true},
        "soh":                          {"name": "State of Health",        "value": 0,"enabled": true},
        "system_voltage":               {"name": "System Voltage",         "value": 0,"enabled": true},
        "system_current":               {"name": "System Current",         "value": 0,"enabled": true},
        "system_power":                 {"name": "System Power",           "value": 0,"enabled": true},
        "max_cell_voltage":             {"name": "Max Cell Voltage",       "value": 0,"enabled": true},
        "min_cell_voltage":             {"name": "Min Cell Voltage",       "value": 0,"enabled": true},
        "avg_cell_voltage":             {"name": "Avg Cell Voltage",       "value": 0,"enabled": true},
        "max_cell_temp":                {"name": "Max Cell Temperature",   "value": 0,"enabled": true},
        "min_cell_temp":                {"name": "Min Cell Temperature",   "value": 0,"enabled": true},
        "avg_cell_temp":                {"name": "Avg Cell Temperature",   "value": 0,"enabled": true},
        "max_charge_current":           {"name": "Max Charge Current",     "value": 0,"enabled": true},
        "max_discharge_current":        {"name": "Max Discharge Current",  "value": 0,"enabled": true},
        "max_charge_power":             {"name": "Max Charge Power",       "value": 0,"enabled": true},
        "max_discharge_power":          {"name": "Max Discharge Power",    "value": 0,"enabled": true},
        "remain_charge_energy":         {"name": "Chargeable Energy",      "value": 0,"enabled": true},
        "remain_discharge_energy":      {"name": "Dischargeable Energy",   "value": 0,"enabled": true},
        "maint_mode": {
            "name": "Maintenance Mode",
            "value": false,
            "enabled": true,
            "actions":	{
                "onSet": [{
                    "func": [
                        {"ifChanged": false, "func": "LogInfo", "amap": "##ESS_ID##"}
                    ],
                    "remap": [
                        {"inValue": true, "ifChanged": false, "uri": "/assets/bms/##BMS_ID##:clear_faults@enabled"},
                        {"inValue": true, "ifChanged": false, "uri": "/assets/bms/##BMS_ID##:clear_alarms@enabled"}
                    ]
                }]
            },

            "options": [
                {"name": "No", "return_value": false},
                {"name": "Yes","return_value": true}
            ]
        },
        "start": {
            "name": "Close DC Contactor",
            "value": false,
            "enabled": false,
            "actions": {
                "onSet": [{
                    "func": [
                        {"ifChanged": false, "func": "LogInfo", "amap": "##ESS_ID##"}
                    ],
                    "remap": [
                        {"inValue": true, "ifChanged": false, "uri": "/controls/bms:CloseContactors@triggerCmd", "outValue": true},
                        {"inValue": true, "ifChanged": false, "uri": "/controls/bms:CloseContactors",            "outValue": 2, "note": "Send close contactors command to BMS"}
                    ]
                }]
            },
            "options": [
                {"name": "No", "return_value": false},
                {"name": "Yes","return_value": true}
            ]
        },

        "stop": {
            "name": "Open DC Contactor",
            "value": false,
            "enabled": false,
            "actions": {
                "onSet": [{
                    "func": [
                        {"ifChanged": false, "func": "LogInfo", "amap": "##ESS_ID##"}
                    ],
                    "remap": [
                        {"inValue": true, "ifChanged": false, "uri": "/controls/bms:OpenContactors@triggerCmd", "outValue": true},
                        {"inValue": true, "ifChanged": false, "uri": "/controls/bms:OpenContactors",            "outValue": 3, "note": "Send open contactors command to BMS"}
                    ]
                }]
            },
            "options": [
                {"name": "No", "return_value": false},
                {"name": "Yes","return_value": true}
            ]
        },

        "clear_faults": {
            "name": "Clear Faults",
            "value": false,
            "enabled": false,
            "actions": {
                "onSet": [{
                    "func": [
                        {"ifChanged": false, "func": "LogInfo", "amap": "##ESS_ID##"}
                    ],
                    "remap": [
                        {"ifChanged": false, "uri": "/controls/bms:ClearFaults@triggerCmd", "outValue": true},
                        {"ifChanged": false, "uri": "/controls/bms:ClearFaults",            "outValue": 1, "note": "Send clear faults command to BMS"}
                    ]
                }]
            },
            "options": [
                {"name": "Clear Faults", "return_value": "Clear"}
            ]
        }
    },

    "/schedule/wake_monitor/bms":{
        "/status/bms:PowerOn":                  { "enable": true, "amap": "bms", "func":"CheckMonitorVar"},
        
        "/status/bms:Power":                    { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:BMSFaultCnt":              { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:IsFaulted":                { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:SOC":                      { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:NumRacksPoweredOn":        { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:RackSOCSum":               { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:AverageRackSOC":           { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:MaxDischargeIV":           { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:MaxChargeIV":              { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:CurrentCheckDone":         { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:AnyFireFaultActive":       { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:MaxContainerTemp":         { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:DCCharging":               { "enable": true, "amap": "bms", "func":"CalculateVar"},
        "/status/bms:DCDischarging":            { "enable": true, "amap": "bms", "func":"CalculateVar"}
    },

    "/system/commands": {
        "runBMSOpts": {
            "value": false,
            "enabled": false,
            "targav": "/system/commands:run",
            "options": [
                {"uri":"/sched/bms:pubAssets_bms",     "aname":"bms", "value":0, "every":1},
                {"uri":"/sched/bms:runMonitor_bms",    "aname":"bms", "value":0, "every":0.1}
            ],
            "actions": {
                "onSet":[{"func":[{"amap": "bms", "func":"SchedItemOpts"}]}]
            }
        }
    },
    
    "/sched/bms": {
        "pubAssets_bms": {
            "value": 0,
            "enable": "/config/bms:enable",
            "mode": "ui",
            "table": "/assets/bms/##BMS_ID##",
            "actions": {
                "onSet":[{"func":[{"amap": "bms", "func":"RunPub"}]}]
            }
        },
        "runMonitor_bms": {
            "value":1,
            "enable": "/config/bms:enable",
            "monitor":"wake_monitor",
            "aname":"bms",
            "actions":{
                "onSet":[{"func":[{"amap": "bms", "func":"RunMonitor"}]}]
            }
        }
    },

    "/vlinks/bms": {
        "power_state_ui":                      { "value": "/assets/bms/##BMS_ID##:power_state",                          "vlink": "/status/bms:PowerOn"                  },
        "system_state_ui":                     { "value": "/assets/bms/##BMS_ID##:system_state",                         "vlink": "/status/bms:Status"                   },
        "mbmu_soc_ui":                         { "value": "/assets/bms/##BMS_ID##:soc",                                  "vlink": "/status/bms:SOC"                      },
        "mbmu_soh_ui":                         { "value": "/assets/bms/##BMS_ID##:soh",                                  "vlink": "/status/bms:SOH"                      },
        "mbmu_voltage_ui":                     { "value": "/assets/bms/##BMS_ID##:system_voltage",                       "vlink": "/status/bms:Voltage"                  },
        "mbmu_current_ui":                     { "value": "/assets/bms/##BMS_ID##:system_current",                       "vlink": "/status/bms:Current"                  },
        "mbmu_power_ui":                       { "value": "/assets/bms/##BMS_ID##:system_power",                         "vlink": "/status/bms:Power"                    },
        "mbmu_max_cell_voltage_ui":            { "value": "/assets/bms/##BMS_ID##:max_cell_voltage",                     "vlink": "/status/bms:MaxCellVoltage"           },
        "mbmu_min_cell_voltage_ui":            { "value": "/assets/bms/##BMS_ID##:min_cell_voltage",                     "vlink": "/status/bms:MinCellVoltage"           },
        "mbmu_avg_cell_voltage_ui":            { "value": "/assets/bms/##BMS_ID##:avg_cell_voltage",                     "vlink": "/status/bms:AvgCellVoltage"           },
        "mbmu_max_cell_temp_ui":               { "value": "/assets/bms/##BMS_ID##:max_cell_temp",                        "vlink": "/status/bms:MaxCellTemp"              },
        "mbmu_min_cell_temp_ui":               { "value": "/assets/bms/##BMS_ID##:min_cell_temp",                        "vlink": "/status/bms:MinCellTemp"              },
        "mbmu_avg_cell_temp_ui":               { "value": "/assets/bms/##BMS_ID##:avg_cell_temp",                        "vlink": "/status/bms:AvgCellTemp"              },
        "mbmu_max_charge_current":             { "value": "/assets/bms/##BMS_ID##:max_charge_current",                   "vlink": "/limits/bms:ChargeCurrentLimit"       },
        "mbmu_max_discharge_current":          { "value": "/assets/bms/##BMS_ID##:max_discharge_current",                "vlink": "/limits/bms:DischargeCurrentLimit"    },
        "mbmu_max_charge_power":               { "value": "/assets/bms/##BMS_ID##:max_charge_power",                     "vlink": "/limits/bms:ChargePowerLimit"         },
        "mbmu_max_discharge_power":            { "value": "/assets/bms/##BMS_ID##:max_discharge_power",                  "vlink": "/limits/bms:DischargePowerLimit"      },
        "mbmu_chargeable_energy_ui":           { "value": "/assets/bms/##BMS_ID##:remain_charge_energy",                 "vlink": "/status/bms:RemainingChargeEnergy"    },
        "mbmu_dischargeable_energy_ui":        { "value": "/assets/bms/##BMS_ID##:remain_discharge_energy",              "vlink": "/status/bms:RemainingDischargeEnergy" },
        "bms_units_connected_ui":              { "value": "/assets/bms/##BMS_ID##:units_connected",                      "vlink": "/status/bms:NumRacksOnline"           },

        "site_bms_status":                     { "value": "/master/##ESS_ID##_ls:bms_status",                              "vlink": "/status/bms:Status"                   },
        "site_bms_poweron":                    { "value": "/master/##ESS_ID##_ls:bms_poweron",                             "vlink": "/status/bms:PowerOn"                  },
        "site_bms_comms_ok":                   { "value": "/master/##ESS_ID##_ls:bms_poweron",                             "vlink": "/status/bms:PowerOn"                  },
        "site_chargeable_energy":              { "value": "/master/##ESS_ID##_ls:chargeable_energy",                       "vlink": "/status/bms:RemainingChargeEnergy"    },
        "site_dischargeable_energy":           { "value": "/master/##ESS_ID##_ls:dischargeable_energy",                    "vlink": "/status/bms:RemainingDischargeEnergy" },
        "site_voltage_dc":                     { "value": "/master/##ESS_ID##_ls:voltage_dc",                              "vlink": "/status/bms:Voltage"           		 },
        "site_current_dc":                     { "value": "/master/##ESS_ID##_ls:current_dc",                              "vlink": "/status/bms:Current"                  },
        "site_power_dc":                       { "value": "/master/##ESS_ID##_ls:power_dc",                                "vlink": "/status/bms:Power"                  },
        "site_bms_max_cell_volt":              { "value": "/master/##ESS_ID##_ls:bms_maximum_cell_voltage",                "vlink": "/status/bms:MaxCellVoltage"  		 },
        "site_bms_min_cell_volt":              { "value": "/master/##ESS_ID##_ls:bms_minimum_cell_voltage",                "vlink": "/status/bms:MinCellVoltage"  		 },
        "site_bms_avg_cell_volt":              { "value": "/master/##ESS_ID##_ls:bms_average_cell_voltage",                "vlink": "/status/bms:AvgCellVoltage"  	     },
        "site_bms_max_cell_temp":              { "value": "/master/##ESS_ID##_ls:bms_maximum_cell_temperature",            "vlink": "/status/bms:MaxCellTemp"              },
        "site_bms_min_cell_temp":              { "value": "/master/##ESS_ID##_ls:bms_minimum_cell_temperature",            "vlink": "/status/bms:MinCellTemp"              },
        "site_bms_avg_cell_temp":              { "value": "/master/##ESS_ID##_ls:bms_average_cell_temperature",            "vlink": "/status/bms:AvgCellTemp"              },
        "site_bms_soc":                        { "value": "/master/##ESS_ID##_ls:bms_soc",                                 "vlink": "/status/bms:SOC"                      },
        "site_bms_soh":                        { "value": "/master/##ESS_ID##_ls:bms_soh",                                 "vlink": "/status/bms:SOH"               		 },
        "site_bms_units_connected":            { "value": "/master/##ESS_ID##_ls:racks_in_service",                        "vlink": "/status/bms:NumRacksOnline"           },
        "site_bms_max_charge_current":         { "value": "/master/##ESS_ID##_ls:bms_max_charge_current",                  "vlink": "/limits/bms:ChargeCurrentLimit"       },
        "site_bms_discharge_current":          { "value": "/master/##ESS_ID##_ls:bms_max_discharge_current",               "vlink": "/limits/bms:DischargeCurrentLimit"    },
        "site_bms_charge_power":               { "value": "/master/##ESS_ID##_ls:bms_max_charge_power",                    "vlink": "/limits/bms:ChargePowerLimit"         },
        "site_bms_discharge_power":            { "value": "/master/##ESS_ID##_ls:bms_max_discharge_power",                 "vlink": "/limits/bms:DischargePowerLimit"      },
        "site_bms_fault_active":               { "value": "/master/##ESS_ID##_ls:bms_fault_active",                        "vlink": "/status/bms:IsFaulted"                },
        "site_bms_fire_fault_active":          { "value": "/master/##ESS_ID##_ls:ess_fire_alarm_active",                   "vlink": "/status/bms:AnyFireFaultActive"       }
    },

    "/status/bms": {
        "CommsOK": {
            "value": false,
            "actions": {
                "onSet":[{
                    "remap":[
                        { "inValue": true, "uri": "/assets/bms/##BMS_ID##:com_status",   "outValue": "ONLINE"},
                        { "inValue": false, "uri": "/assets/bms/##BMS_ID##:com_status",  "outValue": "OFFLINE"},

                        {"uri": "/master/##ESS_ID##_ls:bms_comms_ok"}
                    ]
                }]
            }
        },
        "Power": {
            "value": 0,
            "numVars": 2,
            "variable1": "Voltage",
            "variable2": "Current",
            "scale": 1000,
            "operation": "*"
        },
        "MaxChargeIV": {
            "value": 0,
            "numVars": 2,
            "useExpr": true,
            "variable1": "Voltage",
            "variable2": "/limits/bms:ChargeCurrentLimit",
            "expression": "{1} * {2} * 0.001",
            "actions": { 
                "onSet":[{"remap":[{"uri":"/limits/bms:ChargePowerLimit"}]}]
            }
        },
        "MaxDischargeIV": {
            "value": 0,
            "numVars": 2,
            "useExpr": true,
            "variable1": "Voltage",
            "variable2": "/limits/bms:DischargeCurrentLimit",
            "expression": "{1} * {2} * 0.001",
            "actions": { 
                "onSet":[{"remap":[{"uri":"/limits/bms:DischargePowerLimit"}]}]
            }
        },
        "FaultShutdown": {
            "value": false,
            "note": "When the BMS faults, we'll shutdown the PCS",
            "ifChanged": true,
            "actions": { 
                "onSet":[{
                    "remap": [
                        {"uri": "/master/##ESS_ID##_ls:fault_shutdown", "note": "Pass fault shutdown state up to ESS Controller main"}
                    ],
                    "func": [
                        {"func": "LogInfo",      "amap": "##ESS_ID##"}
                    ]
                }]
            }
        },
        "DCClosed": {
            "value": 0,
            "resetChange": false,
            "actions": { 
                "onSet":[{
                    "remap":[
                        {"inValue": 0, "uri":"/status/bms:SOH@EnableMinValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:SOH@EnableMinValCheck", "outValue": true},
                        {"inValue": 0, "uri":"/status/bms:MinCellVoltage@EnableMinValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:MinCellVoltage@EnableMinValCheck", "outValue": true},
                        {"inValue": 0, "uri":"/status/bms:MaxCellVoltage@EnableMaxValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:MaxCellVoltage@EnableMaxValCheck", "outValue": true},
                        {"inValue": 0, "uri":"/status/bms:NumRacksOnline@EnableMinValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:NumRacksOnline@EnableMinValCheck", "outValue": true},
                        {"inValue": 0, "uri":"/status/bms:Current@EnableMaxValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:Current@EnableMaxValCheck", "outValue": true},
                        {"inValue": 0, "uri":"/status/bms:Current@EnableMinValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:Current@EnableMinValCheck", "outValue": true},
                        {"inValue": 0, "uri":"/status/bms:MaxCellTemp@EnableMaxValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:MaxCellTemp@EnableMaxValCheck", "outValue": true},
                        {"inValue": 0, "uri":"/status/bms:MinCellTemp@EnableMinValCheck", "outValue": false},
                        {"inValue": 1, "uri":"/status/bms:MinCellTemp@EnableMinValCheck", "outValue": true},

                        {"inValue": 0, "uri": "/master/##ESS_ID##_ls:dc_contactors_closed", "outValue": false},
                        {"inValue": 1, "uri": "/master/##ESS_ID##_ls:dc_contactors_closed", "outValue": true}
                    ]
                }]
            }
        },
        "SystemFault": false,
        "SendClearFault": false,
        "PowerOn": {
            "value": "Off Ready",
            "ifChanged": true,
            "actions": {
                "onSet": [{
                    "func": [
                        {"func": "LogInfo","amap": "##ESS_ID##"}
                    ]
                }]
            }
        },
        "Status": "Initial",
        "SOC_read": 0,
        "SOC": {
            "value": 0,
            "useExpr": true,
            "numVars": 3,
            "variable1": "/status/bms:DCClosed",
            "variable2": "/status/bms:SOC_read",
            "variable3": "/status/bms:AverageRackSOC",
            "expression": "if( ({1} == 1), {2}, {3} )"
        },
        "AverageRackSOC": {
            "value": 0,
            "numVars": 2,
            "useExpr": true,
            "variable1": "/status/bms:RackSOCSum",
            "variable2": "/status/bms:NumRacksPoweredOn",
            "expression": "{1} / if(({2} == 0), 1, {2})"
        },
        "RackSOCSum": {
            "value": 0,
            "numVars": 1,
            "variable1": "bms:SOC",
            "operation": "+"
        },
        "NumRacksPoweredOn": {
            "value": 0,
            "numVars": 1,
            "variable1": "bms:PoweredOn",
            "operation": "+"
        },
        "SystemFaultCleared": {
            "value": false,
            "ifChanged": false,
            "actions": {
                "onSet":[{
                    "remap":[
                        {"inValue": true, "outValue": "Clear","uri": "/faults/bms:clear_faults"},
                        {"inValue": true, "outValue": "Clear","uri": "/alarms/bms:clear_alarms"},

                        {"inValue": true, "outValue": false, "uri": "/master/##ESS_ID##_ls:com_status"},
                        {"inValue": true, "outValue": 0, "uri": "/master/##ESS_ID##_ls:bms_faults"},
                        {"inValue": true, "outValue": 0, "uri": "/master/##ESS_ID##_ls:bms_faults11"},
                        {"inValue": true, "outValue": 0, "uri": "/master/##ESS_ID##_ls:bms_faults21"},
                        {"inValue": true, "outValue": 0, "uri": "/master/##ESS_ID##_ls:bms_faults12"},
                        {"inValue": true, "outValue": 0, "uri": "/master/##ESS_ID##_ls:bms_faults22"},
                        {"inValue": true, "outValue": 0, "uri": "/master/##ESS_ID##_ls:bms_alarms1"},
                        {"inValue": true, "outValue": 0, "uri": "/master/##ESS_ID##_ls:bms_alarms2"}
                    ]
                }
            ]}
        },
        "FaultCnt": 0,
        "BMSFaultCnt": {
            "value": 0,
            "numVars": 2,
            "variable1": "bms:FaultCnt", 
            "variable2": "/status/bms:FaultCnt",
            "operation": "+"
        },
        "AlarmCnt": 0,
        "IsFaulted": {
            "value": false,
            "useExpr": true,
            "numVars": 2,
            "variable1": "/status/bms:SystemFault",
            "variable2": "/status/bms:BMSFaultCnt",
            "expression": "{1} or {2} > 0"
        },
        "OffFault": 0,
        "FireFaultActive": false,
        "AnyFireFaultActive": {
            "value": false,
            "numVars": 2,
            "variable1": "bms:FireFaultActive", 
            "variable2": "/status/bms:FireFaultActive",
            "operation": "or"
        },
        "CurrentCheckStopDone": false,
        "CurrentCheckDone": {
            "value": false,
            "enable": "/config/bms:enable",
            "useExpr": true,
            "numVars": 2,
            "variable1": "/status/bms:CurrentCheckStop@seenMaxAlarm",
            "variable2": "/status/bms:CurrentCheckStop@seenMinAlarm",
            "expression": "not {1} and not {2}",
            "actions": { 
                "onSet":[{
                    "remap":[
                        {"uri": "/status/bms:CurrentCheckStopDone"},
                        {"uri": "/master/##ESS_ID##_ls:current_check_stop_done"}
                    ]
                }]
            }
        },
        "AmbientTemperature_1_1": 0,
        "AmbientTemperature_2_1": 0,
        "AmbientTemperature_1_2": 0,
        "AmbientTemperature_2_2": 0,
        "MaxContainerTemp": {
            "value": 0,
            "note": "Find the maximum temperature reported out of the four container temperature readings from the BMS",
            "numVars": 4,
            "variable1": "/status/bms:AmbientTemperature_1_1",
            "variable2": "/status/bms:AmbientTemperature_2_1",
            "variable3": "/status/bms:AmbientTemperature_1_2",
            "variable4": "/status/bms:AmbientTemperature_2_2",
            "operation": "max"
        },
        "DCCharging": {
            "value": false,
            "numVars": 1,
            "variable1": "/status/bms:Current",
            "useExpr": true,
            "expression": "{1} < 0",
            "actions": {
                "onSet":[{
                    "remap":[
                        {"uri": "/master/##ESS_ID##_ls:dc_charging"}
                    ]
                }]
            }
        },
        "DCDischarging": {
            "value": false,
            "numVars": 1,
            "variable1": "/status/bms:Current",
            "useExpr": true,
            "expression": "{1} > 0",
            "actions": {
                "onSet":[{
                    "remap":[
                        {"uri": "/master/##ESS_ID##_ls:dc_discharging"}
                    ]
                }]
            }
        }
    },
    "/limits/bms": {
        "ChargeCurrentLimit": 0,
        "DischargeCurrentLimit": 0
    }
}
