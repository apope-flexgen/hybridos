package main

import (
	"encoding/json"
	"os"
	"path/filepath"
	"testing"
)

func TestGenerateESSControllerFTDConfig(t *testing.T) {
	urisToFormats := map[string]string{
		"/components/catl_rack_6":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/components/catl_rack_7":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/components/catl_rack_5":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/dummy/dummy":                    "<5\"dummy\":float64>",
		"/assets/bms/summary":             "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><17\"chargeable_energy\":float64><12\"clear_faults\":bool><16\"close_contactors\":bool><8\"comms_ok\":bool><11\"dc_charging\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><14\"dc_discharging\":bool><8\"dc_power\":float64><10\"dc_voltage\":float64><20\"dischargeable_energy\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><16\"num_racks_online\":float64><15\"num_racks_total\":float64><15\"open_contactors\":bool><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/assets/pcs/module_1":            "<12\"active_power\":float64><6\"alarms\":float64><14\"apparent_power\":float64><12\"clear_faults\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"l1_current\":float64><10\"l2_current\":float64><10\"l3_current\":float64><10\"maint_mode\":bool><20\"max_igbt_temperature\":float64><14\"reactive_power\":float64><6\"status\":string>",
		"/assets/pcs/module_3":            "<12\"active_power\":float64><6\"alarms\":float64><14\"apparent_power\":float64><12\"clear_faults\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"l1_current\":float64><10\"l2_current\":float64><10\"l3_current\":float64><10\"maint_mode\":bool><20\"max_igbt_temperature\":float64><14\"reactive_power\":float64><6\"status\":string>",
		"/assets/pcs/module_5":            "<12\"active_power\":float64><6\"alarms\":float64><14\"apparent_power\":float64><12\"clear_faults\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"l1_current\":float64><10\"l2_current\":float64><10\"l3_current\":float64><10\"maint_mode\":bool><20\"max_igbt_temperature\":float64><14\"reactive_power\":float64><6\"status\":string>",
		"/assets/bms/rack_6":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/assets/pcs/module_4":            "<12\"active_power\":float64><6\"alarms\":float64><14\"apparent_power\":float64><12\"clear_faults\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"l1_current\":float64><10\"l2_current\":float64><10\"l3_current\":float64><10\"maint_mode\":bool><20\"max_igbt_temperature\":float64><14\"reactive_power\":float64><6\"status\":string>",
		"/components/catl_mbmu_summary_r": "<9\"Timestamp\":string><25\"mbmu_avg_cell_temperature\":float64><21\"mbmu_avg_cell_voltage\":float64><12\"mbmu_current\":float64><25\"mbmu_max_cell_temperature\":float64><21\"mbmu_max_cell_voltage\":float64><23\"mbmu_max_charge_current\":float64><26\"mbmu_max_discharge_current\":float64><25\"mbmu_min_cell_temperature\":float64><21\"mbmu_min_cell_voltage\":float64><10\"mbmu_power\":float64><8\"mbmu_soc\":float64><8\"mbmu_soh\":float64><12\"mbmu_voltage\":float64>",
		"/assets/ess/ess_1":               "<5\"build\":string><8\"comms_ok\":bool><13\"curr_real_mem\":float64><18\"max_apparent_power\":float64><16\"max_charge_power\":float64><19\"max_discharge_power\":float64><18\"max_reactive_power\":float64><13\"peak_real_mem\":float64><11\"system_temp\":float64>",
		"/assets/pcs/module_6":            "<12\"active_power\":float64><6\"alarms\":float64><14\"apparent_power\":float64><12\"clear_faults\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"l1_current\":float64><10\"l2_current\":float64><10\"l3_current\":float64><10\"maint_mode\":bool><20\"max_igbt_temperature\":float64><14\"reactive_power\":float64><6\"status\":string>",
		"/components/catl_ems_bms_rw":     "<9\"Timestamp\":string><7\"ems_cmd\":float64><13\"ems_heartbeat\":float64><11\"ems_rtc_day\":float64><12\"ems_rtc_hour\":float64><14\"ems_rtc_minute\":float64><13\"ems_rtc_month\":float64><14\"ems_rtc_second\":float64><12\"ems_rtc_year\":float64><10\"ems_status\":float64><15\"fault_clear_cmd\":float64>",
		"/components/catl_mbmu_sum_r":     "<9\"Timestamp\":string><14\"mbmu_warning_1\":float64><15\"mbmu_warning_21\":float64><15\"mbmu_warning_22\":float64>",
		"/assets/bms/rack_5":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/assets/pcs/summary":             "<12\"active_power\":float64><22\"active_power_ramp_rate\":float64><31\"active_power_ramp_rate_feedback\":float64><21\"active_power_setpoint\":float64><30\"active_power_setpoint_feedback\":float64><6\"alarms\":float64><14\"apparent_power\":float64><12\"clear_faults\":bool><8\"comms_ok\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><9\"frequency\":float64><18\"frequency_setpoint\":float64><27\"frequency_setpoint_feedback\":float64><14\"grid_follow_pq\":bool><12\"grid_form_vf\":bool><13\"grid_form_vsg\":bool><9\"grid_mode\":string><10\"l1_current\":float64><13\"l1_l2_voltage\":float64><10\"l2_current\":float64><13\"l2_l3_voltage\":float64><10\"l3_current\":float64><13\"l3_l1_voltage\":float64><10\"maint_mode\":bool><16\"max_charge_power\":float64><19\"max_discharge_power\":float64><20\"max_igbt_temperature\":float64><18\"num_modules_online\":float64><17\"num_modules_total\":float64><12\"power_factor\":float64><18\"rated_active_power\":float64><20\"rated_apparent_power\":float64><18\"rated_power_factor\":float64><20\"rated_reactive_power\":float64><14\"reactive_power\":float64><24\"reactive_power_ramp_rate\":float64><33\"reactive_power_ramp_rate_feedback\":float64><23\"reactive_power_setpoint\":float64><32\"reactive_power_setpoint_feedback\":float64><7\"standby\":bool><5\"start\":bool><6\"status\":string><4\"stop\":bool><12\"system_state\":string><16\"voltage_setpoint\":float64><25\"voltage_setpoint_feedback\":float64>",
		"/components/catl_rack_1":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/components/pcs_registers_fast":  "<9\"Timestamp\":string><12\"active_power\":float64><14\"apparent_power\":float64><6\"cosphi\":float64><13\"current_fault\":float64><20\"current_fault_module\":float64><14\"current_status\":float64><15\"current_warning\":float64><10\"dc_p_input\":float64><16\"dc_total_i_input\":float64><6\"e_stop\":float64><14\"grid_current_1\":float64><14\"grid_current_2\":float64><14\"grid_current_3\":float64><14\"grid_frequency\":float64><15\"grid_voltage_rs\":float64><18\"grid_voltage_rs_lv\":float64><15\"grid_voltage_st\":float64><18\"grid_voltage_st_lv\":float64><15\"grid_voltage_tr\":float64><18\"grid_voltage_tr_lv\":float64><21\"module_1_ambient_temp\":float64><18\"module_1_current_r\":float64><18\"module_1_current_s\":float64><18\"module_1_current_t\":float64><19\"module_1_dc_current\":float64><19\"module_1_dc_voltage\":float64><21\"module_1_dc_voltage_n\":float64><21\"module_1_dc_voltage_p\":float64><19\"module_1_i_o_status\":float64><17\"module_1_max_temp\":float64><10\"module_1_p\":float64><10\"module_1_q\":float64><15\"module_1_status\":float64><16\"module_1_temp_r1\":float64><16\"module_1_temp_r2\":float64><16\"module_1_temp_r3\":float64><16\"module_1_temp_s1\":float64><16\"module_1_temp_s2\":float64><16\"module_1_temp_s3\":float64><16\"module_1_temp_t1\":float64><16\"module_1_temp_t2\":float64><16\"module_1_temp_t3\":float64><21\"module_2_ambient_temp\":float64><18\"module_2_current_r\":float64><18\"module_2_current_s\":float64><18\"module_2_current_t\":float64><19\"module_2_dc_current\":float64><19\"module_2_dc_voltage\":float64><21\"module_2_dc_voltage_n\":float64><21\"module_2_dc_voltage_p\":float64><19\"module_2_i_o_status\":float64><17\"module_2_max_temp\":float64><10\"module_2_p\":float64><10\"module_2_q\":float64><15\"module_2_status\":float64><16\"module_2_temp_r1\":float64><16\"module_2_temp_r2\":float64><16\"module_2_temp_r3\":float64><16\"module_2_temp_s1\":float64><16\"module_2_temp_s2\":float64><16\"module_2_temp_s3\":float64><16\"module_2_temp_t1\":float64><16\"module_2_temp_t2\":float64><16\"module_2_temp_t3\":float64><21\"module_3_ambient_temp\":float64><18\"module_3_current_r\":float64><18\"module_3_current_s\":float64><18\"module_3_current_t\":float64><19\"module_3_dc_current\":float64><19\"module_3_dc_voltage\":float64><21\"module_3_dc_voltage_n\":float64><21\"module_3_dc_voltage_p\":float64><19\"module_3_i_o_status\":float64><17\"module_3_max_temp\":float64><10\"module_3_p\":float64><10\"module_3_q\":float64><15\"module_3_status\":float64><16\"module_3_temp_r1\":float64><16\"module_3_temp_r2\":float64><16\"module_3_temp_r3\":float64><16\"module_3_temp_s1\":float64><16\"module_3_temp_s2\":float64><16\"module_3_temp_s3\":float64><16\"module_3_temp_t1\":float64><16\"module_3_temp_t2\":float64><16\"module_3_temp_t3\":float64><21\"module_4_ambient_temp\":float64><18\"module_4_current_r\":float64><18\"module_4_current_s\":float64><18\"module_4_current_t\":float64><19\"module_4_dc_current\":float64><19\"module_4_dc_voltage\":float64><21\"module_4_dc_voltage_n\":float64><21\"module_4_dc_voltage_p\":float64><19\"module_4_i_o_status\":float64><17\"module_4_max_temp\":float64><10\"module_4_p\":float64><10\"module_4_q\":float64><15\"module_4_status\":float64><16\"module_4_temp_r1\":float64><16\"module_4_temp_r2\":float64><16\"module_4_temp_r3\":float64><16\"module_4_temp_s1\":float64><16\"module_4_temp_s2\":float64><16\"module_4_temp_s3\":float64><16\"module_4_temp_t1\":float64><16\"module_4_temp_t2\":float64><16\"module_4_temp_t3\":float64><21\"module_5_ambient_temp\":float64><18\"module_5_current_r\":float64><18\"module_5_current_s\":float64><18\"module_5_current_t\":float64><19\"module_5_dc_current\":float64><19\"module_5_dc_voltage\":float64><21\"module_5_dc_voltage_n\":float64><21\"module_5_dc_voltage_p\":float64><19\"module_5_i_o_status\":float64><17\"module_5_max_temp\":float64><10\"module_5_p\":float64><10\"module_5_q\":float64><15\"module_5_status\":float64><16\"module_5_temp_r1\":float64><16\"module_5_temp_r2\":float64><16\"module_5_temp_r3\":float64><16\"module_5_temp_s1\":float64><16\"module_5_temp_s2\":float64><16\"module_5_temp_s3\":float64><16\"module_5_temp_t1\":float64><16\"module_5_temp_t2\":float64><16\"module_5_temp_t3\":float64><21\"module_6_ambient_temp\":float64><18\"module_6_current_r\":float64><18\"module_6_current_s\":float64><18\"module_6_current_t\":float64><19\"module_6_dc_current\":float64><19\"module_6_dc_voltage\":float64><21\"module_6_dc_voltage_n\":float64><21\"module_6_dc_voltage_p\":float64><19\"module_6_i_o_status\":float64><17\"module_6_max_temp\":float64><10\"module_6_p\":float64><10\"module_6_q\":float64><15\"module_6_status\":float64><16\"module_6_temp_r1\":float64><16\"module_6_temp_r2\":float64><16\"module_6_temp_r3\":float64><16\"module_6_temp_s1\":float64><16\"module_6_temp_s2\":float64><16\"module_6_temp_s3\":float64><16\"module_6_temp_t1\":float64><16\"module_6_temp_t2\":float64><16\"module_6_temp_t3\":float64><19\"num_running_modules\":float64><10\"p_algo_pri\":float64><14\"p_control_mode\":float64><14\"p_id_reference\":float64><7\"p_limit\":float64><13\"p_p_reference\":float64><12\"p_q_priority\":float64><29\"ppc_watchdog_comms_fault_time\":float64><23\"ppc_watchdog_home_p_ref\":float64><23\"ppc_watchdog_home_q_ref\":float64><16\"ppc_watchdog_ref\":float64><28\"ppc_watchdog_refs_reset_time\":float64><14\"q_control_mode\":float64><18\"q_cosphi_reference\":float64><14\"q_iq_reference\":float64><7\"q_limit\":float64><13\"q_q_reference\":float64><13\"q_v_reference\":float64><14\"reactive_power\":float64><5\"reset\":float64><7\"s_limit\":float64><7\"seconds\":float64><5\"start\":float64><4\"stop\":float64><9\"vdc_bus_1\":float64>",
		"/assets/bms/rack_1":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/assets/bms/rack_2":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/components/catl_rack_3":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/components/catl_rack_9":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/assets/bms/rack_9":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/assets/pcs/module_2":            "<12\"active_power\":float64><6\"alarms\":float64><14\"apparent_power\":float64><12\"clear_faults\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"l1_current\":float64><10\"l2_current\":float64><10\"l3_current\":float64><10\"maint_mode\":bool><20\"max_igbt_temperature\":float64><14\"reactive_power\":float64><6\"status\":string>",
		"/site/ess":                       "<22\"active_power_ramp_rate\":float64><21\"active_power_setpoint\":float64><16\"bms_alarm_active\":bool><17\"bms_avg_cell_temp\":float64><20\"bms_avg_cell_voltage\":float64><19\"bms_cell_temp_delta\":float64><22\"bms_cell_voltage_delta\":float64><21\"bms_chargeable_energy\":float64><28\"bms_close_contactors_enabled\":float64><12\"bms_comms_ok\":bool><18\"bms_control_alarms\":float64><29\"bms_current_before_stop_is_ok\":bool><15\"bms_dc_charging\":bool><24\"bms_dc_contactor_control\":float64><24\"bms_dc_contactors_closed\":bool><14\"bms_dc_current\":float64><18\"bms_dc_discharging\":bool><12\"bms_dc_power\":float64><14\"bms_dc_voltage\":float64><24\"bms_dischargeable_energy\":float64><16\"bms_fault_active\":bool><21\"bms_fire_fault_active\":bool><17\"bms_max_cell_temp\":float64><20\"bms_max_cell_voltage\":float64><22\"bms_max_charge_current\":float64><20\"bms_max_charge_power\":float64><25\"bms_max_discharge_current\":float64><23\"bms_max_discharge_power\":float64><17\"bms_min_cell_temp\":float64><20\"bms_min_cell_voltage\":float64><18\"bms_monitor_alarms\":float64><18\"bms_monitor_faults\":float64><20\"bms_num_racks_online\":float64><19\"bms_num_racks_total\":float64><27\"bms_open_contactors_enabled\":float64><7\"bms_soc\":float64><7\"bms_soh\":float64><10\"bms_status\":string><12\"clear_faults\":float64><12\"comms_faults\":float64><16\"ess_alarm_active\":bool><16\"ess_fault_active\":bool><20\"ess_max_charge_power\":float64><23\"ess_max_discharge_power\":float64><18\"frequency_setpoint\":float64><18\"heartbeat_from_ess\":float64><16\"heartbeat_to_ess\":float64><24\"on_off_grid_mode_setting\":float64><16\"pcs_active_power\":float64><35\"pcs_active_power_ramp_rate_feedback\":float64><34\"pcs_active_power_setpoint_feedback\":float64><16\"pcs_alarm_active\":bool><18\"pcs_apparent_power\":float64><20\"pcs_avg_line_voltage\":float64><12\"pcs_comms_ok\":bool><18\"pcs_control_alarms\":float64><14\"pcs_dc_current\":float64><12\"pcs_dc_power\":float64><14\"pcs_dc_voltage\":float64><16\"pcs_fault_active\":bool><13\"pcs_frequency\":float64><31\"pcs_frequency_setpoint_feedback\":float64><13\"pcs_grid_mode\":float64><14\"pcs_is_running\":bool><14\"pcs_l1_current\":float64><17\"pcs_l1_l2_voltage\":float64><14\"pcs_l2_current\":float64><17\"pcs_l2_l3_voltage\":float64><14\"pcs_l3_current\":float64><17\"pcs_l3_l1_voltage\":float64><20\"pcs_max_charge_power\":float64><23\"pcs_max_discharge_power\":float64><24\"pcs_max_igbt_temperature\":float64><18\"pcs_monitor_alarms\":float64><18\"pcs_monitor_faults\":float64><22\"pcs_num_modules_online\":float64><21\"pcs_num_modules_total\":float64><16\"pcs_power_factor\":float64><22\"pcs_rated_active_power\":float64><24\"pcs_rated_apparent_power\":float64><24\"pcs_rated_reactive_power\":float64><18\"pcs_reactive_power\":float64><37\"pcs_reactive_power_ramp_rate_feedback\":float64><36\"pcs_reactive_power_setpoint_feedback\":float64><19\"pcs_standby_enabled\":float64><17\"pcs_start_enabled\":float64><10\"pcs_status\":string><16\"pcs_stop_enabled\":float64><16\"pcs_system_state\":float64><29\"pcs_voltage_setpoint_feedback\":float64><24\"reactive_power_ramp_rate\":float64><23\"reactive_power_setpoint\":float64><26\"start_stop_standby_command\":float64><16\"voltage_setpoint\":float64>",
		"/components/catl_mbmu_stat_r":    "<9\"Timestamp\":string><11\"mbmu_status\":float64>",
		"/components/catl_bms_ems_r":      "<9\"Timestamp\":string><13\"bms_heartbeat\":float64><19\"bms_limit_charge_hv\":float64><22\"bms_limit_discharge_hv\":float64><22\"bms_max_charge_allowed\":float64><25\"bms_max_discharge_allowed\":float64><11\"bms_poweron\":float64><24\"bms_remain_charge_energy\":float64><27\"bms_remain_discharge_energy\":float64><10\"bms_status\":float64><16\"num_hv_subsystem\":float64>",
		"/assets/bms/rack_3":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/assets/bms/rack_7":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/components/pcs_registers_slow":  "<9\"Timestamp\":string><23\"consum_daily_energy_lsb\":float64><23\"consum_daily_energy_msb\":float64><23\"consum_total_energy_lsb\":float64><23\"consum_total_energy_msb\":float64><16\"daily_energy_lsb\":float64><16\"daily_energy_msb\":float64><11\"drop_grad_p\":float64><18\"drop_grad_p_enable\":float64><11\"drop_grad_q\":float64><18\"drop_grad_q_enable\":float64><19\"module_1_hw_version\":float64><19\"module_1_sw_version\":float64><19\"module_2_hw_version\":float64><19\"module_2_sw_version\":float64><19\"module_3_hw_version\":float64><19\"module_3_sw_version\":float64><19\"module_4_hw_version\":float64><19\"module_4_sw_version\":float64><19\"module_5_hw_version\":float64><19\"module_5_sw_version\":float64><19\"module_6_hw_version\":float64><19\"module_6_sw_version\":float64><11\"rise_grad_p\":float64><18\"rise_grad_p_enable\":float64><11\"rise_grad_q\":float64><18\"rise_grad_q_enable\":float64><15\"selector_config\":float64><15\"selector_status\":float64><18\"start_control_mode\":float64><12\"start_grad_p\":float64><19\"start_grad_p_enable\":float64><12\"start_grad_q\":float64><19\"start_grad_q_enable\":float64><11\"stop_grad_p\":float64><18\"stop_grad_p_enable\":float64><11\"stop_grad_q\":float64><18\"stop_grad_q_enable\":float64><16\"total_energy_lsb\":float64><16\"total_energy_msb\":float64>",
		"/assets/bms/rack_4":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/assets/bms/rack_8":              "<6\"alarms\":float64><13\"avg_cell_temp\":float64><16\"avg_cell_voltage\":float64><15\"cell_temp_delta\":float64><18\"cell_voltage_delta\":float64><12\"clear_faults\":bool><20\"dc_contactors_closed\":bool><10\"dc_current\":float64><8\"dc_power\":float64><10\"dc_voltage\":float64><6\"faults\":float64><10\"maint_mode\":bool><13\"max_cell_temp\":float64><16\"max_cell_voltage\":float64><18\"max_charge_current\":float64><16\"max_charge_power\":float64><21\"max_discharge_current\":float64><19\"max_discharge_power\":float64><13\"min_cell_temp\":float64><16\"min_cell_voltage\":float64><3\"soc\":float64><3\"soh\":float64><6\"status\":string>",
		"/components/catl_rack_4":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/components/catl_rack_2":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
		"/components/catl_rack_8":         "<9\"Timestamp\":string><17\"sbmu_ambient_temp\":float64><18\"sbmu_avg_cell_temp\":float64><21\"sbmu_avg_cell_voltage\":float64><19\"sbmu_balance_status\":float64><12\"sbmu_current\":float64><15\"sbmu_door_state\":float64><15\"sbmu_fan_in_box\":float64><20\"sbmu_master_negative\":float64><20\"sbmu_master_positive\":float64><18\"sbmu_max_cell_temp\":float64><27\"sbmu_max_cell_temp_position\":float64><21\"sbmu_max_cell_voltage\":float64><30\"sbmu_max_cell_voltage_position\":float64><23\"sbmu_max_charge_current\":float64><26\"sbmu_max_discharge_current\":float64><18\"sbmu_min_cell_temp\":float64><27\"sbmu_min_cell_temp_position\":float64><21\"sbmu_min_cell_voltage\":float64><30\"sbmu_min_cell_voltage_position\":float64><21\"sbmu_precharge_status\":float64><8\"sbmu_soc\":float64><8\"sbmu_soh\":float64><14\"sbmu_sum_cells\":float64><21\"sbmu_tms_demand_power\":float64><19\"sbmu_tms_fault_code\":float64><21\"sbmu_tms_mode_command\":float64><18\"sbmu_tms_real_mode\":float64><21\"sbmu_tms_temp_setting\":float64><12\"sbmu_voltage\":float64><14\"sbmu_warning_1\":float64><15\"sbmu_warning_21\":float64><15\"sbmu_warning_22\":float64><15\"sbmu_warning_23\":float64>",
	}
	cfg, report := generateESSControllerFTDConfig(urisToFormats)

	// create config file
	testOutputPath := "./test_output/ec_ftd.json"
	os.MkdirAll(filepath.Dir(testOutputPath), os.ModePerm)
	file, err := os.Create(testOutputPath)
	if err != nil {
		t.Fatalf("Failed to create output file: %v", err)
	}
	cfgBytes, err := json.MarshalIndent(cfg, "", "    ")
	if err != nil {
		t.Fatalf("Failed to marshal config to json: %v", err)
	}
	_, err = file.Write(cfgBytes)
	if err != nil {
		t.Fatalf("Failed to write config to file: %v", err)
	}
	t.Log("Config file written to " + testOutputPath + ".")

	// note any additional work that needs to be done
	for _, line := range report {
		t.Log(line)
	}
	if len(report) > 0 {
		t.Log("Config file was written, but the above notes may require manual configuration.")
	}
}
